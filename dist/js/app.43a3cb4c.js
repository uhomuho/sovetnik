(function(t){function e(e){for(var s,l,r=e[0],o=e[1],c=e[2],h=0,d=[];h<r.length;h++)l=r[h],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&d.push(i[l][0]),i[l]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var o=a[r];0!==i[o]&&(s=!1)}s&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var s={},i={app:0},n=[];function l(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=s,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(a,s,function(e){return t[e]}.bind(null,s));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01f7":function(t,e,a){t.exports=a.p+"img/angle-4.4a325331.svg"},"0a3b":function(t,e,a){t.exports=a.p+"img/decrase.c159c73e.svg"},"0d45":function(t,e,a){t.exports=a.p+"img/delete.d2229aa0.svg"},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},1298:function(t,e){t.exports={string:{0:"Января",1:"Февраля",2:"Марта",3:"Апреля",4:"Мая",5:"Июня",6:"Июля",7:"Августа",8:"Сентября",9:"Октября",10:"Ноября",11:"Декабря"},num:{0:"01",1:"02",2:"03",3:"04",4:"05",5:"06",6:"07",7:"08",8:"09",9:"10",10:"11",11:"12"},calendar:{"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"},calendarMonth:{0:"Январь",1:"Февраль",2:"Март",3:"Апрель",4:"Май",5:"Июнь",6:"Июль",7:"Август",8:"Сентябрь",9:"Октябрь",10:"Ноябрь",11:"Декабрь"}}},13:function(t,e){},14:function(t,e){},15:function(t,e){},1601:function(t,e,a){},1628:function(t,e,a){"use strict";var s=a("f06a"),i=a.n(s);i.a},2:function(t,e){},"22fb":function(t,e,a){t.exports=a.p+"img/login_bg.f010b028.png"},"2aae":function(t,e,a){},"2f4b":function(t,e,a){"use strict";var s=a("cf23"),i=a.n(s);i.a},3:function(t,e){},"3a36":function(t,e,a){},"3f13":function(t,e,a){"use strict";var s=a("8545"),i=a.n(s);i.a},4:function(t,e){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="4678"},5:function(t,e){},"51c1":function(t,e,a){},"51d5":function(t,e,a){"use strict";var s=a("5d8a"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("289d"),i=(a("c350"),a("2b0e")),n=a("2f62"),l=(a("b0c0"),a("d3b7"),a("25f0"),a("8c4f")),r=a("3452"),o=a.n(r),c=(a("caad"),a("a15b"),a("a9e3"),a("8ba4"),a("b680"),a("ac1f"),a("2532"),a("5319"),a("498a"),a("96cf"),a("1da1")),u=a("1298"),h=a.n(u),d=(a("99af"),a("bc3a")),f=a.n(d),g=a("aced"),m=a("2c4e");f.a.defaults.headers.common["Content-Type"]="application/json",f.a.defaults.headers.common["Access-Control-Allow-Origin"]="*";var v=function(){var t="http://tomcat.utyf.ru/",e=!1,a=f.a.create({baseURL:"".concat(e?"https://uhomuhoproxy.herokuapp.com/"+t+"api/":"/api/")}),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!t.handlerEnabled},i=function(t){return s(t.config)&&(403!==t.response.status&&401!==t.response.status?g["a"].open({message:"".concat(t.response.statusText,", with status ").concat(t.response.status),type:"is-danger",position:"is-top-right",queue:!1}):(L.state.user.user=null,localStorage.user=null,p.logout(),m["a"].open({message:"Сессия истекла!",position:"is-top-right",actionText:null,duration:2300}),la.push("/login"))),Promise.reject(t)},n=function(t){return t};return a.interceptors.response.use((function(t){return n(t)}),(function(t){return i(t)})),a},p={download:function(t){return v().get("/waybill/print?id=".concat(t))},login:function(t){return v().post("/login",t)},logout:function(){return v().get("/logout")},getWaybills:function(t){return v().get("waybill\n\t\t\t\t\t\t\t\t\t\t\t?from=".concat(t.from.year,"-").concat(t.from.month,"-").concat(t.from.day,"T07%3A00").concat(t.from.timezone,"\n\t\t\t\t\t\t\t\t\t\t\t&to=").concat(t.to.year,"-").concat(t.to.month,"-").concat(t.to.day,"T19%3A00").concat(t.to.timezone,"\n\t\t\t\t\t\t\t\t\t\t\t&page=").concat(t.page?t.page-1:0,"\n\t\t\t\t\t\t\t\t\t\t\t").concat(t.status?"&status="+t.status:"").concat(t.serial?"&serial="+t.serial:""))},getNewWaybill:function(){return v().get("waybill/open")},getDrivers:function(t){return v().get("drivers?keyword=".concat(t))},getPlates:function(t){return v().get("car?keyword=".concat(t))},getLastWb:function(t){return v().get("waybill/last?serial=".concat(t.serial,"&status=CLOSE"))},getLastOpenWb:function(t){return v().get("waybill/last?serial=".concat(t,"&status=OPEN"))},createWaybill:function(t){return v().post("waybill/open",t)},closeWaybill:function(t){return v().post("waybill/close",t)},getCloseWaybill:function(t){return v().get("waybill/close?id=".concat(t))},getAutographReport:function(t){return v().get("report/track?start=".concat(t.from.year,"-").concat(t.from.month,"-").concat(t.from.day,"T07%3A00").concat(t.from.timezone,"&end=").concat(t.to.year,"-").concat(t.to.month,"-").concat(t.to.day,"T19%3A00").concat(t.to.timezone))},getWaybillReport:function(t){return v().get("report/waybill?id=".concat(t))},getCarsFilter:function(){return v().get("car-groups")}};function b(t){localStorage.setItem(t,null)}b("dateFrom"),b("dateTo"),b("filterType"),b("newListDrivers"),b("newListCar"),b("waybills");var y=localStorage.getItem("dateFrom"),w=localStorage.getItem("dateTo"),C=localStorage.getItem("filterType"),_=localStorage.getItem("newWaybill"),x=localStorage.getItem("newListDrivers"),D=localStorage.getItem("newListCar"),F=localStorage.getItem("waybills"),S={namespaced:!0,state:{waybills:F?JSON.parse(F):null,waybill:null,waybillsSort:null,dateFrom:y?new Date(y):null,dateTo:w?new Date(w):null,total:null,filterType:C&&"null"!==C?C:"range",closeWaybill:null,newWaybill:_?JSON.parse(_):null,newListDrivers:x?JSON.parse(x):null,newListCar:D?JSON.parse(D):null,loading:!1,status:["CLOSE"],carsFilter:null},getters:{getNewWaybill:function(t){return t.newWaybill},getNewListDrivers:function(t){return t.newListDrivers},getNewListCar:function(t){return t.newListCar},waybills:function(t){return t.waybills},getCloseWaybill:function(t){return t.closeWaybill},waybillsSortData:function(t){return t.waybillsSort},getPagesCount:function(t){return t.pagesCount},total:function(t){return t.total},getFilterType:function(t){return t.filterType},getCarsFilter:function(t){return t.carsFilter}},mutations:{waybills:function(t,e){return t.waybills=e},waybillsSort:function(t,e){return t.waybillsSort=e},setCloseWaybill:function(t,e){return t.closeWaybill=e},dateFrom:function(t,e){t.dateFrom=new Date(e),localStorage.setItem("dateFrom",e)},dateTo:function(t,e){t.dateTo=new Date(e),localStorage.setItem("dateTo",e)},setFilterType:function(t,e){t.filterType=e,localStorage.setItem("filterType",e)},setAllNewWaybillData:function(t,e){e.waybill&&(t.newWaybill=e.waybill,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))),e.newListDrivers&&(t.newListDrivers=e.listDrivers,localStorage.setItem("newListDrivers",JSON.stringify(t.newListDrivers))),e.newListCar&&(t.newListCar=e.listCar,localStorage.setItem("newListCar",JSON.stringify(t.newListCar)))},setNewWbId:function(t,e){t.newWaybill.id=e.target.value,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))},setNewWbRegistrationPlate:function(t,e){t.newWaybill.car.registrationPlate=e.target.value},setNewWbDateOf:function(t,e){t.newWaybill.of=e,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))},setNewWbCar:function(t,e){t.newWaybill.car=e,t.newWaybill.serial=e.serial,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))},setNewWbDriverName:function(t,e){t.newWaybill.driver.name=e},setNewWbDriver:function(t,e){t.newWaybill.driver=e,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))},setNewWbTask:function(t,e){t.newWaybill.workText=e.target.value,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))},setNewWbFuelStart:function(t,e){t.newWaybill.fuelStart=e.target.value,localStorage.setItem("newWaybill",JSON.stringify(t.newWaybill))},setListDrivers:function(t,e){t.newListDrivers=e,localStorage.setItem("newListDrivers",JSON.stringify(t.newListDrivers))},setListCars:function(t,e){t.newListCar=e,localStorage.setItem("newListCar",JSON.stringify(t.newListCar))},setCarsFilter:function(t,e){return t.carsFilter=e}},actions:{getWaybills:function(t,e){return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,i,n,l,r,o,c,u,d,f,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=t.commit,i=t.state,i.loading=!0,n=(new Date).getFullYear(),l=h.a.num[(new Date).getMonth()],r=(new Date).getDate(),o="".concat((new Date).getTimezoneOffset()/60),c=e&&e.page?e.page:null,"".concat(o).includes("-")?(o="".concat(o).replace("-",""),o="%2B0".concat(o,":00")):o="%2D0".concat(o,":00"),!e||!e.byMonth){a.next=8;break}u={from:{year:e.from.getFullYear(),month:h.a.num[e.from.getMonth()],day:"01",timezone:o},to:{year:e.from.getFullYear(),month:h.a.num[e.from.getMonth()],day:new Date(e.from.getFullYear(),h.a.num[e.from.getMonth()],0).getDate(),timezone:o},page:c},a.next=26;break;case 8:a.t0=i.filterType,a.next="year"===a.t0?11:"yest"===a.t0?13:"month"===a.t0?15:"today"===a.t0?17:"week"===a.t0?19:"range"===a.t0?24:26;break;case 11:return u={from:{year:(new Date).getFullYear(),month:"01",day:"01",timezone:o},to:{year:(new Date).getFullYear(),month:"12",day:"31",timezone:o},page:c},a.abrupt("break",26);case 13:return u={from:{year:n,month:l,day:r-1,timezone:o},to:{year:n,month:l,day:r-1,timezone:o},page:c},a.abrupt("break",26);case 15:return u={from:{year:n,month:l,day:"01",timezone:o},to:{year:n,month:l,day:new Date(n,l,0).getDate(),timezone:o},page:c},a.abrupt("break",26);case 17:return u={from:{year:n,month:l,day:r,timezone:o},to:{year:n,month:l,day:r,timezone:o},page:c},a.abrupt("break",26);case 19:return d=(new Date).getDay()-1,f=r-d,g=f+6,u={from:{year:n,month:l,day:f,timezone:o},to:{year:n,month:l,day:g,timezone:o},page:c},a.abrupt("break",26);case 24:return u={from:{year:i.dateFrom.getFullYear(),month:h.a.num[i.dateFrom.getMonth()],day:1=="".concat(i.dateFrom.getDate()).length?"0".concat(i.dateFrom.getDate()):i.dateFrom.getDate(),timezone:o},to:{year:i.dateTo.getFullYear(),month:h.a.num[i.dateTo.getMonth()],day:1=="".concat(i.dateTo.getDate()).length?"0".concat(i.dateTo.getDate()):i.dateTo.getDate(),timezone:o},page:c},a.abrupt("break",26);case 26:return u.status=e&&e.status?e.status.join(","):null,u.serial=e&&e.serial?e.serial:null,a.next=30,p.getWaybills(u).then((function(t){i.loading=!1;var e=t.data;for(var a in e.listWaybill){if(null!==e.listWaybill[a].car){var n=e.listWaybill[a].car.model,l=e.listWaybill[a].car.registrationPlate;for(var r in null!==n&&(e.listWaybill[a].car.model=n.replace(l,"").trim()),e.listWaybill[a]){var o=e.listWaybill[a][r];"number"==typeof o&&(Number.isInteger(o)||(e.listWaybill[a][r]=e.listWaybill[a][r].toFixed(2).replace(".",",")))}}switch(e.listWaybill[a].status){case"OPEN":e.listWaybill[a].status={},e.listWaybill[a].status.name="OPEN",e.listWaybill[a].status.text="Открыт",e.listWaybill[a].status.class="opened";break;case"CHECK":e.listWaybill[a].status={},e.listWaybill[a].status.name="CHECK",e.listWaybill[a].status.text="Проверка",e.listWaybill[a].status.class="check";break;case"CLOSE":e.listWaybill[a].status={},e.listWaybill[a].status.name="CLOSE",e.listWaybill[a].status.text="Закрыт",e.listWaybill[a].status.class="closed";break;case"ERROR":e.listWaybill[a].status={},e.listWaybill[a].status.name="CHECK",e.listWaybill[a].status.text="Проверка",e.listWaybill[a].status.class="check";break}e.size=e.listWaybill.length}s("waybills",e),localStorage.setItem("waybills",JSON.stringify(e))})).catch((function(t){console.log(t),i.loading=!1}));case 30:case"end":return a.stop()}}),a)})))()},getNewWaybillData:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,p.getNewWaybill().then((function(t){t.data.of=(new Date).getTime(),a("setAllNewWaybillData",{waybill:t.data})})).catch((function(t){console.error(t),m["a"].open({message:"Неизвестная ошибка, повторите позже!",type:"is-danger",queue:!1})}));case 3:case"end":return e.stop()}}),e)})))()},apiCloseWaybill:function(t,e){return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.commit,a.next=3,p.getCloseWaybill(e).then((function(t){var e=t.data;""==t.data?(m["a"].open({message:"Путевой лист не найден!"}),s("setCloseWaybill",null)):"NEW"==e.status?(m["a"].open({message:"Путевой лист ещё не открыт"}),s("setCloseWaybill",null)):"CLOSE"!==e.status&&"CHECK"!==e.status?s("setCloseWaybill",e):m["a"].open({message:"Путевой лист уже закрыт или находится на проверке"})})).catch((function(t){console.log(t)}));case 3:case"end":return a.stop()}}),a)})))()},apiCarsFilter:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,p.getCarsFilter().then((function(t){var e=t.data;for(var s in e)for(var i in e[s]){var n=e[s][i].registrationPlate;e[s][i].registrationPlate=n.toLowerCase()}a("setCarsFilter",e)})).catch((function(t){console.error(t)}));case 2:case"end":return e.stop()}}),e)})))()},apiLastOpenWb:function(t,e){return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t.commit,p.getLastOpenWb(e).then((function(t){null===t.data.waybill?m["a"].open({message:"Такого путевого листа нет!"}):s("setCloseWaybill",t.data)})).catch((function(t){return console.error(t)}));case 2:case"end":return a.stop()}}),a)})))()},setDates:function(t){var e=t.commit,a=new Date,s=new Date(a.setMonth(a.getMonth()-3));s=s.setHours(7,0,0),e("dateFrom",s);var i=new Date(a.setMonth(a.getMonth()+4));i=i.setHours(19,0,0),e("dateTo",i)}}},M=(a("4de4"),a("c975"),a("b85c"));function k(t){localStorage.setItem(t,null)}k("dateFrom"),k("dateTo");var T=localStorage.getItem("dateTo"),W=localStorage.getItem("dateFrom"),j={namespaced:!0,state:{autographReport:null,totalData:null,carsList:null,dateTo:T||null,dateFrom:W||null,waybillReport:null,filter:"range"},getters:{getWaybillReport:function(t){return t.waybillReport},getAutographReport:function(t){return t.autographReport},getTotalData:function(t){return t.totalData},getFilteredWaybillsReports:function(t){return t.filteredWaybillsReports},getCarsList:function(t){return t.carsList}},mutations:{setAutographReport:function(t,e){t.autographReport=e},setTotalData:function(t,e){t.totalData=e},setCarsList:function(t,e){t.carsList=e},setDateTo:function(t,e){t.dateTo=e.date.getTime()},setDateFrom:function(t,e){t.dateFrom=e.date.getTime()},setWaybillReport:function(t,e){t.waybillReport=e},setFilter:function(t,e){t.filter=e}},actions:{apiAutographReport:function(t){var e,a,s,i,n=t.commit,l=t.state,r=new Date(l.dateFrom),o=new Date(l.dateTo),c=(new Date).getFullYear(),u=h.a.num[(new Date).getMonth()],d=(new Date).getDate(),f="".concat((new Date).getTimezoneOffset()/60);switch("".concat(f).includes("-")?(f="".concat(f).replace("-",""),f="%2B0".concat(f,":00")):f="%2D0".concat(f,":00"),l.filter){case"year":e={from:{year:(new Date).getFullYear(),month:"01",day:"01",timezone:f},to:{year:(new Date).getFullYear(),month:"12",day:"31",timezone:f}};break;case"yest":e={from:{year:c,month:u,day:d-1,timezone:f},to:{year:c,month:u,day:d-1,timezone:f}};break;case"month":e={from:{year:c,month:u,day:"01",timezone:f},to:{year:c,month:u,day:new Date(c,u,0).getDate(),timezone:f}};break;case"today":e={from:{year:c,month:u,day:d,timezone:f},to:{year:c,month:u,day:d,timezone:f}};break;case"week":a=(new Date).getDay()-1,s=d-a,i=s+6,e={from:{year:c,month:u,day:s,timezone:f},to:{year:c,month:u,day:i,timezone:f}};break;case"range":e={from:{year:r.getFullYear(),month:h.a.num[r.getMonth()],day:1=="".concat(r.getDate()).length?"0".concat(r.getDate()):r.getDate(),timezone:f},to:{year:o.getFullYear(),month:h.a.num[o.getMonth()],day:1=="".concat(o.getDate()).length?"0".concat(o.getDate()):o.getDate(),timezone:f}};break}p.getAutographReport(e).then((function(t){for(var e=t.data.data,a={motionFuelUp:0,motionFuelDown:0,firstFuel:0,lastFuel:0},s=0;s<=e.length-1;s++)for(var i in e[s].idingDistance=e[s].totalDistance-e[s].workDistance,a.motionFuelUp+=e[s].motionFuelUp?Number(e[s].motionFuelUp):0,a.motionFuelDown+=e[s].motionFuelDown?Number(e[s].motionFuelDown):0,a.firstFuel+=e[s].firstFuel?Number(e[s].firstFuel):0,a.lastFuel+=e[s].lastFuel?Number(e[s].lastFuel):0,e[s]){var l=e[s][i];"number"==typeof l&&(Number.isInteger(l)||(e[s][i]=e[s][i].toFixed(2).replace(".",",")))}a.motionFuelUp=a.motionFuelUp.toFixed(2).replace(".",","),a.motionFuelDown=a.motionFuelDown.toFixed(2).replace(".",","),a.firstFuel=a.firstFuel.toFixed(2).replace(".",","),a.lastFuel=a.lastFuel.toFixed(2).replace(".",","),n("setTotalData",a),n("setAutographReport",e)})).catch((function(t){return console.error(t)}))},apiWaybillReport:function(t,e){var a=t.commit;p.getWaybillReport(e).then((function(t){var e=15,s=897/t.data.track.length,i=[],n=t.data.track,l=0,r=0;for(var o in n)n[o].firstFuel-n[o].lastFuel<0||0==n[o].totalDistance?n[o].fuelDown=0:n[o].fuelDown=new Number(((n[o].firstFuel-n[o].lastFuel)/n[o].totalDistance).toFixed(2));r=n[0].fuelDown;for(var c=0,u=n.length;c<u;c++){var h=n[c].fuelDown;l=h>l?h:l,r=h<r&&h>0?h:r}for(var d in n)n[d].config={id:d,x:e+10,y:0!==l?400-n[d].fuelDown*(400/(10*Math.ceil(l/10)+5)):400-n[d].fuelDown,radius:10},i.push(n[d].config.x),i.push(n[d].config.y),e+=s;n.filter((function(t){switch(t.fuelDown){case l:t.maxFuelDown=!0,t.minFuelDown=!1;break;case r:t.minFuelDown=!0,t.maxFuelDown=!1;break;default:t.minFuelDown=!1,t.maxFuelDown=!1;break}}));for(var f=[],g=10*Math.ceil(l/10)+5,m=0;m<=g;m+=5){var v={num:m,y:400-400/g*m,height:400/g};f.push(v)}t.data.steps=f,t.data.track=n,t.data.lineConfig={points:i,stroke:"#617E8C",strokeWidth:5,lineCap:"round",lineJoin:"round"};var p,b=[],y=Object(M["a"])(n);try{for(y.s();!(p=y.n()).done;){var w=p.value;w.firstLocation.includes("°")||b.push(w.firstLocation),w.lastLocation.includes("°")||b.push(w.lastLocation)}}catch(_){y.e(_)}finally{y.f()}function C(t,e,a){return a.indexOf(t)===e}b=b.filter(C),t.data.trackLocations=b,a("setWaybillReport",t.data)})).catch((function(t){console.error(t)}))},setDates:function(t){var e=t.commit,a=new Date,s=new Date(a.setMonth(a.getMonth()-3));e("setDateFrom",{date:s});var i=new Date(a.setMonth(a.getMonth()+4));e("setDateTo",{date:i})}}},O={namespaced:!0,state:{user:null},getters:{getUser:function(t){return t.user}},mutations:{setUser:function(t,e){return t.user=e}},actions:{login:function(t,e){var a=t.commit;p.login(e).then((function(t){var e=t.data;if(!e.status)return e.status||"Bad Credentials"!==e.error?m["a"].open({message:"Неизвестная ошибка!",type:"is-danger"}):m["a"].open({message:"Логин или пароль введён неверно!",type:"is-warning"});localStorage.user=JSON.stringify(e),a("setUser",e)}))},isLocalUser:function(t){var e=t.commit,a=t.state;!localStorage.user||"null"===localStorage.user||a.user&&"null"!=a.user&&null!=a.user||e("setUser",JSON.parse(localStorage.user))}}};i["default"].use(n["a"]);var P=new n["a"].Store({});P.registerModule("waybills",S),P.registerModule("reports",j),P.registerModule("user",O);var L=P,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("img",{attrs:{src:a("22fb")}}),s("div",{staticClass:"wrapper"},[s("img",{staticClass:"bg",attrs:{src:a("7991")}}),s("div",{staticClass:"columns is-flex is-centered is-mobile"},[t._m(0),s("div",{staticClass:"column is-6"},[s("form",{staticClass:"column-container",attrs:{id:"form"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("img",{attrs:{src:a("ca2f")}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.username,expression:"formData.username"}],staticClass:"input",attrs:{placeholder:"Логин"},domProps:{value:t.formData.username},on:{input:function(e){e.target.composing||t.$set(t.formData,"username",e.target.value)}}})]),t.errors.username?s("p",{staticClass:"help is-danger"},[t._v("Заполните поле!")]):t._e()]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("img",{attrs:{src:a("b009")}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})]),t.errors.password?s("p",{staticClass:"help is-danger"},[t._v("Заполните поле!")]):t._e()]),s("div",{staticClass:"field"},[s("b-checkbox",{model:{value:t.stayIn,callback:function(e){t.stayIn=e},expression:"stayIn"}},[t._v("Оставаться в системе")])],1),s("div",{staticClass:"field bottom"},[s("div",{staticClass:"control"},[s("router-link",{attrs:{to:"/reset"}},[t._v("Забыли пароль?")]),s("button",{staticClass:"button"},[t._v("Войти")])],1)]),t._m(1),s("div",{staticClass:"field reg"},[s("div",{staticClass:"control"},[s("router-link",{staticClass:"button",attrs:{to:"/register"}},[t._v("Регистрация")])],1)])])])])])])},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column is-6"},[a("div",{staticClass:"column-container"},[a("div",{staticClass:"content"},[a("h1",[t._v(" ЦСППР"),a("br"),t._v("«СОВЕТНИК»")]),a("p",[t._v("г. Екатеринбург,"),a("br"),t._v("Кировский район")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field hr"},[a("div",{staticClass:"control"},[a("p",[t._v("Новый пользователь")]),a("hr")])])}],z=a("5530"),B={name:"Login",components:{},data:function(){return{formData:{username:null,password:null},stayIn:!1,errors:{username:!1,password:!1}}},props:["user"],methods:Object(z["a"])(Object(z["a"])({},Object(n["d"])("user",["setUser"])),{},{login:function(){var t=this;if(this.formData.username?this.errors.username=!1:this.errors.username=!0,this.formData.password?this.errors.password=!1:this.errors.password=!0,this.errors.username||this.errors.password)return!1;p.login(this.formData).then((function(e){var a=e.data;if(!a.status)return a.status||"Bad Credentials"!==a.error?m["a"].open({message:"Неизвестная ошибка!",type:"is-danger"}):m["a"].open({message:"Логин или пароль введён неверно!",type:"is-warning"});var s=a;if(t.stayIn){var i=JSON.stringify(s);i=o.a.AES.encrypt(i,"kFLeCZ19095").toString(),localStorage.user=i}else t.setUser(a);setTimeout((function(){t.$router.push("/waybills")}),100)}))}})},$=B,N=(a("1628"),a("2877")),R=Object(N["a"])($,Y,E,!1,null,null,null),I=R.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-flex is-mobile"},[t._m(0),a("div",{staticClass:"column is-6"},[a("div",{staticClass:"column-container"},[t._m(1),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.passwordCheck,expression:"formData.passwordCheck"}],staticClass:"input",attrs:{type:"password",placeholder:"Пароль еще раз"},domProps:{value:t.formData.passwordCheck},on:{click:function(e){t.checkClicked=!0},input:function(e){e.target.composing||t.$set(t.formData,"passwordCheck",e.target.value)}}})]),t.formData.password!==t.formData.passwordCheck&&t.checkClicked?a("p",{staticClass:"help is-danger"},[t._v("Пароли не совпадают!")]):t._e()]),t._m(2),t._m(3),t._m(4),t._m(5)])])])])])},H=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"column is-6"},[s("div",{staticClass:"column-container"},[s("img",{staticClass:"bg",attrs:{src:a("7991")}}),s("h1",[t._v("Регистрация"),s("br"),t._v("нового"),s("br"),t._v("сотрудника")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Логин"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{staticClass:"input",attrs:{placeholder:"Город"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{staticClass:"input",attrs:{placeholder:"Район"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{staticClass:"input",attrs:{placeholder:"Электронная почта"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("button",{staticClass:"button is-pulled-right"},[t._v("Регистрация")])])])}],A={name:"Register",data:function(){return{formData:{login:null,password:null,passwordCheck:null,city:null,district:null,email:null},checkClicked:!1}}},X=A,J=(a("b99a"),Object(N["a"])(X,U,H,!1,null,"1cbf8cbc",null)),q=J.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},V=[],Z={name:"Waybills"},G=Z,Q=Object(N["a"])(G,K,V,!1,null,null,null),tt=Q.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{click:t.close}},[s("div",{staticClass:"section"},[t.byCars?s("div",{staticClass:"container by-car"},[s("div",{staticClass:"level"},[t._m(1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"wrapper car has-text-centered",on:{click:t.toggleCars}},[s("p",{staticClass:"title"},[t._v("Тип ТС")]),s("p",[t._v(t._s(t.selectedCar?t.selectedCar:"Выберите автомобиль"))]),t.cars&&t.openCars?s("div",{staticClass:"dropdown"},t._l(t.cars,(function(e,a){return s("p",{class:t.selectedCar==a?"selected":"",on:{click:function(e){return t.setCar(a)}}},[t._v(" "+t._s(a))])})),0):t._e()]),s("div",{staticClass:"wrapper month has-text-centered",on:{click:t.openMonthSelector}},[s("p",{staticClass:"title"},[t._v("Месяц")]),s("p",[s("b",[t._v(t._s(t.stringMonth))])]),s("MonthSelector",{class:t.monthSelector?"":"is-hidden",attrs:{date:t.choosenMonth},on:{select:t.getWaybillsMonth,change:t.setDateMonth}})],1)])])]),s("hr"),s("div",{staticClass:"carousel"},[t.cars&&t.showSlider?s("VueSlickCarousel",{attrs:{dots:!1,arrows:!0,slidesToShow:10},scopedSlots:t._u([{key:"nextArrow",fn:function(){return[s("div",{staticClass:"custom-arrow"},[s("img",{attrs:{src:a("bae1")}})])]},proxy:!0},{key:"prevArrow",fn:function(){return[s("div",{staticClass:"custom-arrow"},[s("img",{attrs:{src:a("0a3b")}})])]},proxy:!0}],null,!1,3475880345)},t._l(t.cars[t.selectedCar],(function(e,a){return s("p",{class:t.serial==e.serial?"selected":"",on:{click:function(a){return t.setPlate(e)}}},[t._v(t._s(e.registrationPlate.toLowerCase()))])})),0):t._e()],1),s("div",{staticClass:"container"},[t.waybills&&0!==t.waybills.listWaybill.length?s("byCarsTable",{attrs:{waybills:t.waybills.listWaybill}}):t.selectedCar?t.serial?s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Нет путевых листов по заданным параметрам")])]):s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Выберите регистрационный номер автомобиля")])]):s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Выберите автомобиль")])])],1)]):s("div",{staticClass:"container"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("table",[s("tr",[s("td",{class:"year"==t.filterType?"active":null,on:{click:function(e){t.setFilter("year"),t.getWaybills(0)}}},[t._v("весь год")]),s("td",{class:"yest"==t.filterType?"active":null,on:{click:function(e){t.setFilter("yest"),t.getWaybills(0)}}},[t._v("вчера")])]),s("tr",[s("td",{class:"month"==t.filterType?"active":null,on:{click:function(e){t.setFilter("month"),t.getWaybills(0)}}},[t._v("месяц")]),s("td",{class:"today"==t.filterType?"active":null,on:{click:function(e){t.setFilter("today"),t.getWaybills(0)}}},[t._v("сегодня")])]),s("tr",[s("td",{class:"week"==t.filterType?"active":null,on:{click:function(e){t.setFilter("week"),t.getWaybills(0)}}},[t._v("неделя")]),s("td",{class:"range"==t.filterType?"active":null,on:{click:function(e){t.setFilter("range"),t.getWaybills(0)}}},[t._v("период")])])])]),s("div",{staticClass:"level-item"},[s("div",{staticClass:"wrapper from",on:{click:t.openCalendar}},[s("p",[t._v(t._s(t.stringFrom))]),t.invalidDate(t.dateFrom)||t.invalidDate(t.dateTo)?t._e():s("Calendar",{class:t.showCalendar?null:"is-hidden",attrs:{firstDate:t.dateFrom,lastDate:t.dateTo},on:{dateTo:t.setTo,dateFrom:t.setFrom}})],1),s("div",{staticClass:"wrapper to",on:{click:t.openCalendar}},[s("p",[t._v(t._s(t.stringTo))])])])])]),s("hr"),t.waybills?s("Table",{attrs:{waybills:t.waybills,total:t.total,isLoading:t.isLoading,status:t.$router.currentRoute.query.status}}):t._e()],1)]),t.isLoading?s("b-loading",{attrs:{"is-full-page":!0,centerMode:!0},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}}):t._e()],1)},at=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v(" Путевые листы"),a("br"),t._v("за период:")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v(" Путевые листы"),a("br"),t._v("по автомобилям")])])])}],st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper",attrs:{id:"waybills_table"},on:{click:t.close}},[s("div",{staticClass:"container"},[s("div",{staticClass:"table-container"},[s("img",{staticClass:"spin",attrs:{src:a("5f67")},on:{click:function(e){return t.getWaybills(t.filter)}}}),s("table",{staticClass:"table is-fullwidth"},[s("thead",[s("tr",[s("th",{staticClass:"id"},[t._v("№")]),s("th",{staticClass:"car"},[s("div",{staticClass:"dropdown",class:t.openedCarDropdown?"is-active":null,on:{click:t.toggleCarDropdown}},[s("p",[t._v("Машина")]),s("img",{staticClass:"icon",attrs:{src:a("6568")}}),t.openedCarDropdown&&t.carFilter?s("div",{staticClass:"menu"},[s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent"},[s("div",{staticClass:"tile is-child"},[s("div",{staticClass:"title"},[t._v("Тип ТС")]),t._l(t.carFilter,(function(e,a){return s("div",{staticClass:"field"},[s("div",{staticClass:"choose",class:a==t.choosenCar?"selected":null,on:{mouseover:function(e){return t.setCar(a)}}},[t._v(t._s(a))])])})),s("div",{staticClass:"field"},[s("div",{staticClass:"choose",class:null==t.choosenCar?"selected":null,on:{click:function(e){return t.setCar(null)}}},[t._v("Все")])])],2),s("div",{staticClass:"tile is-child is-8"},[s("div",{staticClass:"title"},[t._v("Гос. номер")]),s("div",{staticClass:"columns is-flex is-multiline"},t._l(t.carFilter[t.choosenCar],(function(e){return t.choosenCar?s("div",{staticClass:"column is-4"},[s("div",{staticClass:"column-container num",class:t.filter.serial==e.serial?"selected":null,on:{click:function(a){return t.setSerial(e.serial)}}},[t._v(t._s(e.registrationPlate))])]):t._e()})),0)])])])]):t._e()])]),t._m(0),t._m(1),s("th",{staticClass:"task"},[t._v("Задание")]),s("th",{staticClass:"driver"},[t._v("Водитель")]),s("th",{staticClass:"status"},[s("div",{staticClass:"dropdown",class:t.openedDropdown?"is-active":null,on:{click:t.toggleDropdown}},[s("p",[t._v("Статус")]),s("img",{staticClass:"icon",attrs:{src:a("6568")}}),t.openedDropdown?s("div",{staticClass:"menu"},t._l(t.statusList,(function(e){return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],attrs:{type:"checkbox",id:e.id},domProps:{value:e.name,checked:Array.isArray(t.filter.status)?t._i(t.filter.status,e.name)>-1:t.filter.status},on:{input:t.setStatus,change:function(a){var s=t.filter.status,i=a.target,n=!!i.checked;if(Array.isArray(s)){var l=e.name,r=t._i(s,l);i.checked?r<0&&t.$set(t.filter,"status",s.concat([l])):r>-1&&t.$set(t.filter,"status",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.filter,"status",n)}}}),s("label",{staticClass:"checkbox",attrs:{for:e.id}},[t._v(t._s(e.text)),s("img",{attrs:{src:"/icons/check.svg"}})])])])})),0):t._e()])])])]),t._l(t.waybills.listWaybill,(function(e){return 0!==t.waybills.listWaybill.length?s("tbody",[s("tr",{on:{click:function(a){"CLOSE"==e.status.name?t.goto("/reports/waybill/"+e.id):"OPEN"==e.status.name&&t.goto("/waybills/close/"+e.id)}}},[s("td",{staticClass:"id",class:e.status.class},[t._v(t._s(e.id))]),s("td",{staticClass:"car is-paddingless"},[s("table",{staticClass:"table is-fullwidth"},[s("tr",[s("td",[t._v(t._s(e.car?e.car.model:""))]),s("td",{staticClass:"is-lowercase"},[t._v(t._s(e.car?e.car.registrationPlate:""))])])])]),s("td",{staticClass:"start"},[t._v(" "+t._s(e.startPlan?t.dateTimeStamp(e.startPlan):e.startFact?t.dateTimeStamp(e.startFact):null)),e.startPlan&&e.startFact?s("img",{staticClass:"icon",attrs:{src:"img/check_"+(e.startPlan==e.startFact?"true":"false")+".svg"}}):t._e()]),s("td",{staticClass:"finish"},[t._v(t._s(e.finishPlan?t.dateTimeStamp(e.finishPlan):e.finishFact?t.dateTimeStamp(e.finishFact):null)),e.finishPlan&&e.finishFact?s("img",{staticClass:"icon",attrs:{src:"img/check_"+(e.finishPlan==e.finishFact?"true":"false")+".svg"}}):t._e()]),s("td",{staticClass:"task"},[t._v(t._s(e.workText.length<=40?e.workText:e.workText.slice(0,-(e.workText.length-40))+"..."))]),s("td",{staticClass:"driver"},[t._v(t._s(e.driver?e.driver.name:""))]),s("td",{staticClass:"status",class:e.status.class},[t._v(" "+t._s(e.status.text)),"CLOSE"==e.status.name?s("div",{attrs:{to:"/reports/waybill/"+e.id}},[s("img",{staticClass:"icon",attrs:{src:a("8508")}})]):t._e(),"OPEN"==e.status.name?s("div",{attrs:{to:"/waybills/close/"+e.id}},[s("img",{staticClass:"icon",attrs:{src:a("5c45")}})]):t._e()])])]):t._e()}))],2)]),s("b-loading",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),0==t.waybills.listWaybill.length?s("div",{staticClass:"container"},[t._m(2)]):t._e(),s("router-link",{staticClass:"open",attrs:{to:"/waybills/open"}},[s("b-button",[t._v("Открыть путевой лист")])],1),0!==t.waybills.listWaybill.length?s("nav",{staticClass:"pagination",attrs:{role:"navigation","aria-label":"pagination"}},[s("p",[t._v(t._s(t.waybillsOnPage)+"/"+t._s(t.waybills.count))]),s("div",{staticClass:"button prev",class:t.prevDisabled?null:"active",attrs:{role:"button",disabled:t.prevDisabled},on:{click:t.prevPage}}),s("div",{staticClass:"button next",class:t.nextDisabled?null:"active",attrs:{role:"button",disabled:t.nextDisabled},on:{click:t.nextPage}})]):t._e()],1)])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"start"},[t._v(" Время"),a("br"),t._v("выезда")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"finish"},[t._v("Время"),a("br"),t._v("возвращения")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("span",{staticClass:"subtitle has-text-warning"},[t._v("Нет путевых листов по заданным параметрам")])])}],nt={name:"Table",data:function(){return{mode:"production",currentPage:1,filter:{status:"closed"==this.status?["CLOSE"]:"check"==this.status?["CHECK"]:"opened"==this.status?["OPEN"]:[],serial:null},statusList:[{name:"CLOSE",text:"Закрыт",id:"close"},{name:"OPEN",text:"Открыт",id:"open"},{name:"CHECK,ERROR",text:"Проверка",id:"check"}],openedDropdown:!1,openedCarDropdown:!1,choosenCar:null}},props:["waybills","isLoading","total","status"],computed:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["e"])("waybills",{loading:function(t){return t.loading}})),Object(n["c"])("waybills",{carFilter:"getCarsFilter"})),{},{isEmpty:function(){return this.waybills=={}},waybillsOnPage:function(){return this.currentPage*this.waybills.size>this.waybills.count?this.waybills.count:this.currentPage*this.waybills.size},compPrev:function(){return!0},prevDisabled:function(){return 1==this.currentPage},nextDisabled:function(){return!(this.currentPage*this.waybills.size<this.waybills.count)}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["d"])("waybills",["setCarFilter"])),Object(n["b"])("waybills",["getWaybills","apiCarsFilter"])),{},{setCar:function(t){var e=this;this.filter.serial=t,this.choosenCar=t,null==t&&setTimeout((function(){e.getWaybills(e.filter).then((function(){e.openedCarDropdown=!1}))}))},toggleDropdown:function(t){t.target.matches(".menu *")||(this.openedDropdown=!this.openedDropdown)},noWorkDistance:function(t,e){return(t-e).toFixed(2)},dateTimeStamp:function(t){var e=new Date(t),a=1=="".concat(e.getDate()).length?"0".concat(e.getDate()):e.getDate(),s=1=="".concat(e.getHours()).length?"0".concat(e.getHours()):e.getHours(),i=1=="".concat(e.getMinutes()).length?"0".concat(e.getMinutes()):e.getMinutes();return"".concat(a,".").concat(h.a.num[e.getMonth()]," ").concat(s,":").concat(i)},goto:function(t){return this.$router.push(t)},setStatus:function(){var t=this;setTimeout((function(){t.getWaybills(t.filter)}))},setSerial:function(t){var e=this;this.filter.serial=t,setTimeout((function(){e.getWaybills(e.filter)})),this.openedCarDropdown=!1},nextPage:function(){this.nextDisabled||(this.currentPage+=1,this.getWaybills({page:this.currentPage}))},prevPage:function(){this.prevDisabled||(this.currentPage-=1,this.getWaybills({page:this.currentPage}))},close:function(t){t.target.matches(".dropdown *")||(this.openedDropdown=!1,this.openedCarDropdown=!1)},toggleCarDropdown:function(t){t.target.matches(".menu *")||(this.openedCarDropdown=!this.openedCarDropdown)}}),beforeMount:function(){this.apiCarsFilter()}},lt=nt,rt=Object(N["a"])(lt,st,it,!1,null,null,null),ot=rt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table is-fullwidth"},[t._m(0),a("tbody",t._l(t.waybills,(function(e){return a("tr",[a("td",{staticClass:"date"},[t._v(t._s(new Date(e.of).getDate()))]),a("td",{staticClass:"wb"},[t._v(t._s(e.id))]),a("td",{staticClass:"fs"},[t._v(t._s(e.fuelStart))]),a("td",{staticClass:"inc"},[t._v(t._s(e.trackFuelUp))]),a("td",{staticClass:"out"},[t._v(t._s(e.trackFuelDown))]),a("td",{staticClass:"fe"},[t._v(t._s(e.fuelFinish))]),a("td",{staticClass:"mls"},[t._v(t._s(e.mileageStart))]),a("td",{staticClass:"mlend"},[t._v(t._s(e.mileageFinish))])])})),0),a("tfoot",[a("tr",[a("th",{staticClass:"date"}),a("th",{staticClass:"wb"}),a("th",{staticClass:"fs"},[t._v("Итого:")]),a("th",{staticClass:"inc"},[t._v(t._s(t.totalTrack.fuelUp))]),a("th",{staticClass:"out"},[t._v(t._s(t.totalTrack.fuelDown))]),a("th",{staticClass:"fe"}),a("th",{staticClass:"mls"}),a("th",{staticClass:"mlend"})])])])},ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"date"},[t._v("Дата ")]),a("th",{staticClass:"wb"},[t._v("Путевой лист")]),a("th",{staticClass:"fs"},[t._v("Нач. ост.")]),a("th",{staticClass:"inc"},[t._v("Приход")]),a("th",{staticClass:"out"},[t._v("Расход")]),a("th",{staticClass:"fe"},[t._v("Кон. ост.")]),a("th",{staticClass:"mls"},[t._v("Спидометр"),a("br"),t._v("начало")]),a("th",{staticClass:"mlend"},[t._v("Спидометр"),a("br"),t._v("конец ")])])])}],ht={name:"TableByCars",props:["waybills"],computed:{totalTrack:function(){var t,e={fuelUp:0,fuelDown:0},a=Object(M["a"])(this.waybills);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.trackFuelUp&&"null"!==s.trackFuelUp&&(e.fuelUp+=parseFloat(s.trackFuelUp.replace(",","."))),s.trackFuelDown&&"null"!==s.trackFuelDown&&(e.fuelDown+=parseFloat(s.trackFuelDown.replace(",",".")))}}catch(i){a.e(i)}finally{a.f()}return e}}},dt=ht,ft=(a("b9ec"),Object(N["a"])(dt,ct,ut,!1,null,"730841e2",null)),gt=ft.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"calendar range"},[s("div",{staticClass:"header"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseYear()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.year))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseYear()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"wrapper body"},[s("div",{staticClass:"month-container"},[s("div",{staticClass:"month-selector"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseMonthFrom()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.selectedMonthNameFrom))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseMonthFrom()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"body"},[s("table",[t._m(0),s("tbody",t._l(t.weeksFrom,(function(e){return s("tr",t._l(e,(function(e){return e.unix>0&&e.unix<t.compDayTo?s("td",{staticClass:"calendar-td",class:t.compDayFrom==e.unix?"active":e.unix<=t.compDayTo&&e.unix>t.compDayFrom?"in-range":null,on:{click:function(a){return t.setDayFrom(e.num)}}},[t._v(t._s(e.num))]):e.unix>t.compDayTo?s("td",{staticClass:"disabled calendar-td"},[t._v(t._s(e.num))]):s("td")})),0)})),0)])])]),s("div",{staticClass:"month-container"},[s("div",{staticClass:"month-selector"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseMonthTo()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.selectedMonthNameTo))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseMonthTo()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"body"},[s("table",[t._m(1),s("tbody",t._l(t.weeksTo,(function(e){return s("tr",t._l(e,(function(e){return e.unix>0&&e.unix>t.compDayFrom?s("td",{staticClass:"calendar-td",class:t.compDayTo==e.unix?"active":e.unix<t.compDayTo&&e.unix>=t.compDayFrom?"in-range":null,on:{click:function(a){return t.setDayTo(e.num)}}},[t._v(t._s(e.num))]):e.unix<t.compDayFrom?s("td",{staticClass:"calendar-td disabled"},[t._v(t._s(e.num))]):s("td")})),0)})),0)])])])])])},vt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("пн")]),a("th",[t._v("вт")]),a("th",[t._v("ср")]),a("th",[t._v("чт")]),a("th",[t._v("пт")]),a("th",[t._v("сб")]),a("th",[t._v("вс")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("пн")]),a("th",[t._v("вт")]),a("th",[t._v("ср")]),a("th",[t._v("чт")]),a("th",[t._v("пт")]),a("th",[t._v("сб")]),a("th",[t._v("вс")])])])}],pt={name:"Calendar",data:function(){return{currentMonthFrom:h.a.num[(new Date).getMonth()-2],currentMonthTo:h.a.num[(new Date).getMonth()+2],currentYear:(new Date).getFullYear(),selectedMonthFrom:this.firstDate?1=="".concat(this.firstDate.getMonth()+1).length?"0".concat(this.firstDate.getMonth()+1):this.firstDate.getMonth()+1:null,selectedMonthTo:this.lastDate?1=="".concat(this.lastDate.getMonth()+1).length?"0".concat(this.lastDate.getMonth()+1):this.lastDate.getMonth()+1:null,selectedYear:this.firstDate?this.firstDate.getFullYear():null,currentDayFrom:(new Date).getDate(),currentDayTo:(new Date).getDate(),selectedDayFrom:this.firstDate?this.firstDate.getDate():null,selectedDayTo:this.lastDate?this.lastDate.getDate():null,weeksFrom:[],weeksTo:[]}},props:["firstDate","lastDate"],computed:{selectedMonthNameFrom:function(){var t=this.selectedMonthFrom?this.selectedMonthFrom:this.currentMonthFrom;return h.a.calendar[t]},selectedMonthNameTo:function(){var t=this.selectedMonthTo?this.selectedMonthTo:this.currentMonthTo;return h.a.calendar[t]},compDayFrom:function(){var t="".concat(this.selectedDayFrom).length;return new Date("".concat(this.selectedYear?this.selectedYear:this.currentYear,"-").concat(this.firstDate?this.firstDate.getMonth()+1:this.selectedMonthFrom?this.selectedMonthFrom:this.currentMonthFrom,"-").concat(t>1&&t>2?new Date(this.selectedDayFrom).getDate():this.selectedDayFrom," 07:00")).getTime()},compDayTo:function(){var t="".concat(this.selectedDayTo).length;return new Date("".concat(this.selectedYear?this.selectedYear:this.currentYear,"-").concat(this.lastDate?this.lastDate.getMonth()+1:this.selectedMonthTo?this.selectedMonthTo:this.currentMonthTo,"-").concat(t>1&&t>2?new Date(this.selectedDayTo).getDate():this.selectedDayTo," 19:00")).getTime()},year:function(){var t=this.selectedYear?this.selectedYear:this.currentYear;return t},selectedDateFrom:function(){var t=this.selectedYear?this.selectedYear:this.currentYear,e=this.selectedMonthFrom?this.selectedMonthFrom:this.currentMonthFrom,a=this.selectedDayFrom?new Date(this.selectedDayFrom).getDate():new Date(this.currentDayFrom).getDate();return new Date("".concat(t,"-").concat(e,"-").concat(a,", 07:00"))},selectedDateTo:function(){var t=this.selectedYear?this.selectedYear:this.currentYear,e=this.selectedMonthTo?this.selectedMonthTo:this.currentMonthTo,a=this.selectedDayTo?new Date(this.selectedDayTo).getDate():new Date(this.currentDayTo).getDate();return new Date("".concat(t,"-").concat(e,"-").concat(a,", 19:00"))}},methods:{setDayFrom:function(t){var e=this.selectedYear?this.selectedYear:this.currentYear,a=this.selectedMonthFrom?this.selectedMonthFrom:this.currentMonthFrom;this.selectedDayFrom=new Date("".concat(e,"-").concat(a,"-").concat(t," 07:00")).getTime(),this.$emit("dateFrom",{date:this.selectedDateFrom})},setDayTo:function(t){var e=this.selectedYear?this.selectedYear:this.currentYear,a=this.selectedMonthTo?this.selectedMonthTo:this.currentMonthTo;this.selectedDayTo=new Date("".concat(e,"-").concat(a,"-").concat(t," 19:00")).getTime(),this.$emit("dateTo",{date:this.selectedDateTo})},decraseYear:function(){var t=this.selectedYear?this.selectedYear-1:this.currentYear-1,e=new Date(t,1,0);this.selectedYear=e.getFullYear(),this.getDaysFrom(),this.getDaysTo(),this.$emit("changeYear",{dateFrom:this.selectedDateFrom,dateTo:this.selectedDateTo})},incraseYear:function(){var t=this.selectedYear?this.selectedYear+1:this.currentYear+1,e=new Date(t,1,0);this.selectedYear=e.getFullYear(),this.getDaysFrom(),this.getDaysTo(),this.$emit("changeYear",{dateFrom:this.selectedDateFrom,dateTo:this.selectedDateTo})},decraseMonthFrom:function(){var t=this.selectedMonthFrom?parseInt(this.selectedMonthFrom,10)-1:parseInt(this.currentMonthFrom,10)-1,e=this.selectedYear?this.selectedYear:this.currentYear,a=new Date(e,t,0);0==t&&this.decraseYear(),this.selectedMonthFrom=h.a.num[a.getMonth()],this.getDaysFrom()},decraseMonthTo:function(){var t=this.selectedMonthTo?parseInt(this.selectedMonthTo,10)-1:parseInt(this.currentMonthTo,10)-1,e=this.selectedYear?this.selectedYear:this.currentYear,a=new Date(e,t,0);0==t&&this.decraseYear(),this.selectedMonthTo=h.a.num[a.getMonth()],this.getDaysTo()},incraseMonthFrom:function(){var t=this.selectedMonthFrom?parseInt(this.selectedMonthFrom,10)+1:parseInt(this.currentMonthFrom,10)+1,e=this.selectedYear?this.selectedYear:this.currentYear,a=new Date(e,t,0);13==t&&this.incraseYear(),this.selectedMonthFrom=h.a.num[a.getMonth()],this.getDaysFrom()},incraseMonthTo:function(){var t=this.selectedMonthTo?parseInt(this.selectedMonthTo,10)+1:parseInt(this.currentMonthTo,10)+1,e=this.selectedYear?this.selectedYear:this.currentYear,a=new Date(e,t,0);13==t&&this.incraseYear(),this.selectedMonthTo=h.a.num[a.getMonth()],this.getDaysTo()},getDaysFrom:function(){var t,e,a=[],s=this.selectedYear?this.selectedYear:this.currentYear,i=this.selectedMonthFrom?this.selectedMonthFrom:this.currentMonthFrom,n="07:00",l=new Date(s,i,0).getDate(),r=new Date("".concat(s,"-").concat(i,"-").concat(l)).getDay(),o=new Date("".concat(s,"-").concat(i,"-1")).getDay(),c=1;t=0!==o?o-1:6,e=(l+t-r+7)/7;for(var u=0;u<=e-1;u++)if(a[u]=[],0==u){for(var h=1;h<=t;h++)a[u].push({unix:0,num:""});for(var d=t+1;d<=7;d++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++}else if(a.length==e){for(var f=1;f<=r;f++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++;for(var g=r+1;g<=7;g++)a[u].push({unix:0,num:""}),c++}else for(var m=1;m<=7;m++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++;this.weeksFrom=a},getDaysTo:function(){var t,e,a=[],s=this.selectedYear?this.selectedYear:this.currentYear,i=this.selectedMonthTo?this.selectedMonthTo:this.currentMonthTo,n="19:00",l=new Date(s,i,0).getDate(),r=new Date("".concat(s,"-").concat(i,"-").concat(l)).getDay(),o=new Date("".concat(s,"-").concat(i,"-1")).getDay(),c=1;t=0!==o?o-1:6,e=(l+t-r+7)/7;for(var u=0;u<=e-1;u++)if(a[u]=[],0==u){for(var h=1;h<=t;h++)a[u].push({unix:0,num:""});for(var d=t+1;d<=7;d++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++}else if(a.length==e){for(var f=1;f<=r;f++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++;for(var g=r+1;g<=7;g++)a[u].push({unix:0,num:""}),c++}else for(var m=1;m<=7;m++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++;this.weeksTo=a}},mounted:function(){this.getDaysFrom(),this.getDaysTo()}},bt=pt,yt=(a("2f4b"),Object(N["a"])(bt,mt,vt,!1,null,"67c59f86",null)),wt=yt.exports,Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.range?t._e():s("div",{staticClass:"calendar"},[s("div",{staticClass:"header"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseYear()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.year))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseYear()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"month-selector"},[s("div",{staticClass:"columns is-flex is-multiline is-variable"},[s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(0)}}},[s("p",{class:"01"==t.selectedMonth?"selected":""},[t._v("Январь")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(1)}}},[s("p",{class:"02"==t.selectedMonth?"selected":""},[t._v("Февраль")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(2)}}},[s("p",{class:"03"==t.selectedMonth?"selected":""},[t._v("Март")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(3)}}},[s("p",{class:"04"==t.selectedMonth?"selected":""},[t._v("Апрель")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(4)}}},[s("p",{class:"05"==t.selectedMonth?"selected":""},[t._v("Май")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(5)}}},[s("p",{class:"06"==t.selectedMonth?"selected":""},[t._v("Июнь")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(6)}}},[s("p",{class:"07"==t.selectedMonth?"selected":""},[t._v("Июль")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(7)}}},[s("p",{class:"08"==t.selectedMonth?"selected":""},[t._v("Август")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(8)}}},[s("p",{class:"09"==t.selectedMonth?"selected":""},[t._v("Сентябрь")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(9)}}},[s("p",{class:"10"==t.selectedMonth?"selected":""},[t._v("Октябрь")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(10)}}},[s("p",{class:"11"==t.selectedMonth?"selected":""},[t._v("Ноябрь")])]),s("div",{staticClass:"column is-6",on:{click:function(e){return t.setMonth(11)}}},[s("p",{class:"12"==t.selectedMonth?"selected":""},[t._v("Декабрь")])])])])])},_t=[],xt={name:"Calendar",data:function(){return{currentMonth:h.a.num[(new Date).getMonth()],currentYear:(new Date).getFullYear(),curHourIndex:0,hoursList:["05","07","08","13","17","19","20","22"],timepicker:{currentHours:"05",currentMinutes:"00",selectedHours:this.open&&this.date?1=="".concat(new Date(this.date).getHours()).length?"0".concat(new Date(this.date).getHours()):new Date(this.date).getHours():"05",selectedMinutes:"00"},selectedMonth:this.date?1=="".concat(this.date.getMonth()+1).length?"0".concat(this.date.getMonth()+1):this.date.getMonth()+1:null,selectedYear:this.date?this.date.getFullYear():null,currentDay:(new Date).getDate(),selectedDay:this.date?this.date.getDate():null,weeks:[]}},props:["dateStart","dateFinish","time","autograph","range","date","open"],computed:{daysCount:function(){var t=this.selectedYear?this.selectedYear:this.currentYear,e=this.selectedMonth?this.selectedMonth:this.currentMonth;return new Date(t,e,0).getDate()},selectedMonthName:function(){var t=this.selectedMonth?this.selectedMonth:this.currentMonth;return h.a.calendar[t]},compDay:function(){var t="".concat(this.selectedDay).length;return new Date("".concat(this.selectedYear?this.selectedYear:this.currentYear,"-").concat(this.date?this.date.getMonth()+1:this.selectedMonth?this.selectedMonth:this.currentMonth,"-").concat(t>1&&t>2?new Date(this.selectedDay).getDate():this.selectedDay," ").concat(this.timepicker.selectedHours,":00")).getTime()},year:function(){var t=this.selectedYear?this.selectedYear:this.currentYear;return t},hours:function(){var t=this.timepicker.selectedHours?this.timepicker.selectedHours:this.timepicker.currentHours;return t},minutes:function(){var t=this.timepicker.selectedMinutes?1=="".concat(this.timepicker.selectedMinutes).length?"0".concat(this.timepicker.selectedMinutes):this.timepicker.selectedMinutes:1=="".concat(this.minutesRound(this.timepicker.currentMinutes)).length?"0".concat(this.minutesRound(this.timepicker.currentMinutes)):this.minutesRound(this.timepicker.currentMinutes);return t},selectedDate:function(){var t=this.selectedYear?this.selectedYear:this.currentYear,e=this.selectedMonth?this.selectedMonth:this.currentMonth,a=this.selectedDay?new Date(this.selectedDay).getDate():new Date(this.currentDay).getDate(),s=this.timepicker.selectedHours?this.timepicker.selectedHours:this.timepicker.currentHours,i=this.timepicker.selectedMinutes?this.timepicker.selectedMinutes:this.timepicker.currentMinutes;return new Date("".concat(t,"-").concat(e,"-").concat(a,", ").concat(s,":").concat(i))}},methods:Object(z["a"])(Object(z["a"])({},Object(n["b"])("reports",{getAutographReport:"apiAutographReport"})),{},{decraseYear:function(){var t=this.selectedYear?this.selectedYear-1:this.currentYear-1,e=new Date(t,1,0);this.selectedYear=e.getFullYear(),this.$emit("change",{date:this.selectedDate})},incraseYear:function(){var t=this.selectedYear?this.selectedYear+1:this.currentYear+1,e=new Date(t,1,0);this.selectedYear=e.getFullYear(),this.$emit("change",{date:this.selectedDate})},setMonth:function(t){0==t&&this.decraseYear(),this.selectedMonth=h.a.num[t],this.$emit("select",{date:this.selectedDate})}})},Dt=xt,Ft=(a("51d5"),Object(N["a"])(Dt,Ct,_t,!1,null,"5974f03a",null)),St=Ft.exports,Mt=a("a7ab"),kt=a.n(Mt),Tt=(a("7b8d"),a("6a2c"),{name:"Reports",components:{Table:ot,Calendar:wt,VueSlickCarousel:kt.a,MonthSelector:St,byCarsTable:gt},data:function(){return{isLoading:!1,showCalendar:!1,byCars:!1,selectedCar:null,choosenMonth:new Date,monthSelector:!1,cars:null,openCars:!1,showSlider:!1,serial:null}},watch:{byCars:function(){this.premount()}},props:["status"],computed:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["c"])("waybills",{waybills:"waybills",total:"total",filterType:"getFilterType"})),Object(n["e"])("waybills",{dateTo:function(t){return t.dateTo},dateFrom:function(t){return t.dateFrom}})),{},{stringMonth:function(){return"".concat(h.a.calendarMonth[this.choosenMonth.getMonth()]," ").concat(this.choosenMonth.getFullYear())},stringFrom:function(){return"С ".concat(this.dateFrom.getDate()," ").concat(h.a.string[this.dateFrom.getMonth()]," ").concat(this.dateFrom.getFullYear())},stringTo:function(){return"по ".concat(this.dateTo.getDate()," ").concat(h.a.string[this.dateTo.getMonth()]," ").concat(this.dateTo.getFullYear())}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["b"])("waybills",["waybillsSort","getWaybills","setDates"])),Object(n["d"])("waybills",{setDateTo:"dateTo",setDateFrom:"dateFrom",setFilter:"setFilterType",setWaybills:"waybills"})),{},{setCar:function(t){var e=this;this.selectedCar=t,this.showSlider=!1,setTimeout((function(){e.showSlider=!0}),50)},setPlate:function(t){this.serial=t.serial;var e={byMonth:!0,from:this.choosenMonth,serial:this.serial};this.getWaybills(e)},setDateMonth:function(t){this.choosenMonth=t.date},getWaybillsMonth:function(t){this.choosenMonth=t.date,this.monthSelector=!1;var e={byMonth:!0,from:t.date};this.getWaybills(e)},toggleCars:function(){this.openCars=!this.openCars},openMonthSelector:function(t){t.target.matches(".wrapper.month *")&&!t.target.matches(".wrapper.month .calendar *")&&(this.monthSelector=!this.monthSelector)},setTo:function(t){var e=this;this.setDateTo(t.date),setTimeout((function(){e.getWaybills()}),50)},setFrom:function(t){var e=this;this.setDateFrom(t.date),setTimeout((function(){e.getWaybills()}),50)},openCalendar:function(t){(t.target.matches(".wrapper.to *")||t.target.matches(".wrapper.from p")||t.target.matches(".wrapper.from"))&&(this.showCalendar=!this.showCalendar)},close:function(t){t.target.matches(".calendar *, .wrapper.to *, .wrapper.from *")||(this.showCalendar||this.monthSelector)&&(this.showCalendar=!1),t.target.matches(".wrapper.month, .wrapper.month *, .calendar *")||this.monthSelector&&(this.monthSelector=!1),t.target.matches(".wrapper.car, .wrapper.car *, .dropdown *")||this.openCars&&(this.openCars=!1)},invalidDate:function(t){return"Invalid Date"==t},premount:function(){var t=this;if(this.byCars)this.setWaybills(null),p.getCarsFilter().then((function(e){return t.cars=e.data}));else{var e=this.$router.currentRoute.query.status;if(this.dateTo&&this.dateFrom&&"Invalid Date"!=this.dateFrom&&"Invalid Date"!=this.dateTo)switch(e){case"closed":this.getWaybills({serial:null,status:["CLOSE"]}).then((function(){return t.isLoading=!1}));break;case"check":this.getWaybills({serial:null,status:["CHECK"]}).then((function(){return t.isLoading=!1}));break;case"opened":this.getWaybills({serial:null,status:["OPEN"]}).then((function(){return t.isLoading=!1}));break;default:this.getWaybills().then((function(){return t.isLoading=!1}));break}else this.setDates().then((function(){switch(t.isLoading=!0,e){case"closed":t.getWaybills({serial:null,status:["CLOSE"]}).then((function(){return t.isLoading=!1}));break;case"check":t.getWaybills({serial:null,status:["CHECK"]}).then((function(){return t.isLoading=!1}));break;case"opened":t.getWaybills({serial:null,status:["OPEN"]}).then((function(){return t.isLoading=!1}));break;default:t.getWaybills().then((function(){return t.isLoading=!1}));break}}))}}}),mounted:function(){this.premount()}}),Wt=Tt,jt=(a("3f13"),Object(N["a"])(Wt,et,at,!1,null,"51234a56",null)),Ot=jt.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{on:{click:t.close}},[s("div",{staticClass:"section"},[s("div",{staticClass:"container by-car"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"wrapper car has-text-centered",on:{click:t.toggleCars}},[s("p",{staticClass:"title"},[t._v("Тип ТС")]),s("p",[t._v(t._s(t.selectedCar?t.selectedCar:"Выберите автомобиль"))]),t.cars&&t.openCars?s("div",{staticClass:"dropdown"},t._l(t.cars,(function(e,a){return s("p",{class:t.selectedCar==a?"selected":"",on:{click:function(e){return t.setCar(a)}}},[t._v(" "+t._s(a))])})),0):t._e()]),s("div",{staticClass:"wrapper month has-text-centered",on:{click:t.openMonthSelector}},[s("p",{staticClass:"title"},[t._v("Месяц")]),s("p",[s("b",[t._v(t._s(t.stringMonth))])]),s("MonthSelector",{class:t.monthSelector?"":"is-hidden",attrs:{date:t.choosenMonth},on:{select:t.getWaybillsMonth,change:t.setDateMonth}})],1)])])]),s("hr"),s("div",{staticClass:"carousel"},[t.cars&&t.showSlider?s("VueSlickCarousel",{attrs:{dots:!1,arrows:!0,slidesToShow:10},scopedSlots:t._u([{key:"nextArrow",fn:function(){return[s("div",{staticClass:"custom-arrow"},[s("img",{attrs:{src:a("bae1")}})])]},proxy:!0},{key:"prevArrow",fn:function(){return[s("div",{staticClass:"custom-arrow"},[s("img",{attrs:{src:a("0a3b")}})])]},proxy:!0}],null,!1,3475880345)},t._l(t.cars[t.selectedCar],(function(e,a){return s("p",{class:t.serial==e.serial?"selected":"",on:{click:function(a){return t.setPlate(e)}}},[t._v(t._s(e.registrationPlate.toLowerCase()))])})),0):t._e()],1),s("div",{staticClass:"container"},[t.waybills&&0!==t.waybills.listWaybill.length?s("byCarsTable",{attrs:{waybills:t.waybills.listWaybill}}):t.selectedCar?t.serial?s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Нет путевых листов по заданным параметрам")])]):s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Выберите регистрационный номер автомобиля")])]):s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Выберите автомобиль")])]),t.waybills?s("div",{staticClass:"arrow incrase",class:t.waybills.listWaybill.length<3?"min-height":"",on:{click:t.incraseMonth}},[s("img",{attrs:{src:a("bae1")}}),s("p",{domProps:{innerHTML:t._s(t.nextDate)}})]):t._e(),t.waybills?s("div",{staticClass:"arrow decrase",class:t.waybills.listWaybill.length<3?"min-height":"",on:{click:t.decraseMonth}},[s("img",{attrs:{src:a("0a3b")}}),s("p",{domProps:{innerHTML:t._s(t.prevDate)}})]):t._e()],1)])]),t.isLoading?s("b-loading",{attrs:{"is-full-page":!0,centerMode:!0},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}}):t._e()],1)},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v(" Путевые листы"),a("br"),t._v("по автомобилям")])])])}],Yt={name:"Reports",components:{Table:ot,Calendar:wt,VueSlickCarousel:kt.a,MonthSelector:St,byCarsTable:gt},data:function(){return{isLoading:!1,showCalendar:!1,byCars:!0,selectedCar:null,choosenMonth:new Date,monthSelector:!1,cars:null,openCars:!1,showSlider:!1,serial:null}},watch:{byCars:function(){this.premount()}},props:["status"],computed:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["c"])("waybills",{waybills:"waybills",total:"total",filterType:"getFilterType"})),Object(n["e"])("waybills",{dateTo:function(t){return t.dateTo},dateFrom:function(t){return t.dateFrom}})),{},{stringMonth:function(){return"".concat(h.a.calendarMonth[this.choosenMonth.getMonth()]," ").concat(this.choosenMonth.getFullYear())},nextDate:function(){var t=this.choosenMonth.getMonth();return"".concat(11!==t?h.a.calendarMonth[t+1]:h.a.calendarMonth[0],"<br>").concat(11!==t?this.choosenMonth.getFullYear():this.choosenMonth.getFullYear()+1)},prevDate:function(){var t=this.choosenMonth.getMonth();return"".concat(0!==t?h.a.calendarMonth[t-1]:h.a.calendarMonth[11],"<br>").concat(0!==t?this.choosenMonth.getFullYear():this.choosenMonth.getFullYear()-1)}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["b"])("waybills",["waybillsSort","getWaybills","setDates"])),Object(n["d"])("waybills",{setDateTo:"dateTo",setDateFrom:"dateFrom",setFilter:"setFilterType",setWaybills:"waybills"})),{},{setCar:function(t){var e=this;this.selectedCar=t,this.showSlider=!1,setTimeout((function(){e.showSlider=!0}),50)},setPlate:function(t){this.serial=t.serial;var e={byMonth:!0,from:this.choosenMonth,serial:this.serial};this.getWaybills(e)},setDateMonth:function(t){this.choosenMonth=t.date},incraseMonth:function(){var t=this.choosenMonth.getMonth(),e=new Date(this.choosenMonth.setMonth(t+1));this.choosenMonth=e;var a={byMonth:!0,from:this.choosenMonth,serial:this.serial};this.getWaybills(a)},decraseMonth:function(){var t=this.choosenMonth.getMonth(),e=new Date(this.choosenMonth.setMonth(t-1));this.choosenMonth=e;var a={byMonth:!0,from:this.choosenMonth,serial:this.serial};this.getWaybills(a)},getWaybillsMonth:function(t){this.choosenMonth=t.date,this.monthSelector=!1;var e={byMonth:!0,from:t.date};this.getWaybills(e)},toggleCars:function(){this.openCars=!this.openCars},openMonthSelector:function(t){t.target.matches(".wrapper.month *")&&!t.target.matches(".wrapper.month .calendar *")&&(this.monthSelector=!this.monthSelector)},setTo:function(t){var e=this;this.setDateTo(t.date),setTimeout((function(){e.getWaybills()}),50)},setFrom:function(t){var e=this;this.setDateFrom(t.date),setTimeout((function(){e.getWaybills()}),50)},openCalendar:function(t){(t.target.matches(".wrapper.to *")||t.target.matches(".wrapper.from p")||t.target.matches(".wrapper.from"))&&(this.showCalendar=!this.showCalendar)},close:function(t){t.target.matches(".calendar *, .wrapper.to *, .wrapper.from *")||(this.showCalendar||this.monthSelector)&&(this.showCalendar=!1),t.target.matches(".wrapper.month, .wrapper.month *, .calendar *")||this.monthSelector&&(this.monthSelector=!1),t.target.matches(".wrapper.car, .wrapper.car *, .dropdown *")||this.openCars&&(this.openCars=!1)},invalidDate:function(t){return"Invalid Date"==t},premount:function(){var t=this;if(this.byCars)this.setWaybills(null),setTimeout((function(){t.setWaybills(null)}),500),setTimeout((function(){t.setWaybills(null)}),1e3),p.getCarsFilter().then((function(e){return t.cars=e.data}));else{var e=this.$router.currentRoute.query.status;if(this.dateTo&&this.dateFrom&&"Invalid Date"!=this.dateFrom&&"Invalid Date"!=this.dateTo)switch(e){case"closed":this.getWaybills({serial:null,status:["CLOSE"]}).then((function(){return t.isLoading=!1}));break;case"check":this.getWaybills({serial:null,status:["CHECK"]}).then((function(){return t.isLoading=!1}));break;case"opened":this.getWaybills({serial:null,status:["OPEN"]}).then((function(){return t.isLoading=!1}));break;default:this.getWaybills().then((function(){return t.isLoading=!1}));break}else this.setDates().then((function(){switch(t.isLoading=!0,e){case"closed":t.getWaybills({serial:null,status:["CLOSE"]}).then((function(){return t.isLoading=!1}));break;case"check":t.getWaybills({serial:null,status:["CHECK"]}).then((function(){return t.isLoading=!1}));break;case"opened":t.getWaybills({serial:null,status:["OPEN"]}).then((function(){return t.isLoading=!1}));break;default:t.getWaybills().then((function(){return t.isLoading=!1}));break}}))}}}),mounted:function(){this.premount()}},Et=Yt,zt=(a("d7b6"),Object(N["a"])(Et,Pt,Lt,!1,null,"2952aa78",null)),Bt=zt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container",attrs:{id:"create"},on:{click:t.close}},[t.waybill?s("div",{staticClass:"section"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[t._v("№"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.id,expression:"waybill.id"}],staticClass:"id",attrs:{type:"number"},domProps:{value:t.waybill.id},on:{input:[function(e){e.target.composing||t.$set(t.waybill,"id",e.target.value)},t.changeWidthId]}})])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t._v("от"),s("span",{staticClass:"date-of",on:{click:t.openOf}},[t._v(t._s(t.dateStringOf))]),s("Calendar",{staticClass:"cal-of",class:t.ofTime?null:"hide",attrs:{date:new Date(t.waybill.of)},on:{select:t.selectOf,change:t.changeOf}})],1)])])])])]),s("hr"),s("div",{staticClass:"tile is-ancestor is-marginless"},[s("div",{staticClass:"tile"},[s("div",{staticClass:"level"},[t._m(1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item plate",class:t.plates?"is-active":""},[t.waybill?s("input",{attrs:{id:"registrationPlate",placeholder:"Гос. номер",disabled:t.waybill.car&&t.waybill.car.registrationPlate},on:{keyup:t.filterPlates}}):t._e(),t.waybill.car&&t.waybill.car.registrationPlate?s("div",{staticClass:"tag",on:{click:function(e){return t.setRegistrationPlate({serial:null,registrationPlate:null})}}},[t._v(" "+t._s(t.waybill.car?t.waybill.car.registrationPlate:"")),s("img",{staticClass:"delete",attrs:{src:a("0d45")}})]):t._e(),s("img",{staticClass:"icon",attrs:{src:a("01f7")}}),t.plates?s("div",{staticClass:"plates dropdown"},t._l(t.plates,(function(e){return s("p",{class:e.registrationPlate==t.waybill.car.registrationPlate?"selected":"",on:{click:function(a){t.setCar(e),t.getLastWb(e.serial),t.plates=null}}},[t._v(t._s(e.registrationPlate))])})),0):t._e()])])]),s("div",{staticClass:"level"},[t._m(2),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t.waybill?s("input",{staticClass:"driver",attrs:{id:"driver",placeholder:"Водитель",disabled:t.waybill.driver&&t.waybill.driver.name},on:{keyup:t.filterDriver}}):t._e(),t.waybill.driver&&t.waybill.driver.name?s("div",{staticClass:"tag",on:{click:function(e){return t.setDriver(null)}}},[t._v(" "+t._s(t.waybill.driver.name)),s("img",{staticClass:"delete",attrs:{src:a("0d45")}})]):t._e(),s("img",{staticClass:"icon",attrs:{src:a("01f7")}}),t.drivers?s("div",{staticClass:"drivers dropdown"},t._l(t.drivers,(function(e){return s("p",{class:t.waybill.driver&&e.id==t.waybill.driver.id?"selected":"",on:{click:function(a){t.setDriver(e),t.drivers=null}}},[t._v(t._s(e.name))])})),0):t._e()])])]),s("div",{staticClass:"level"},[t._m(3),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item date"},[s("div",{staticClass:"wrapper",class:t.startTime?"is-active":null,on:{click:t.openStart}},[s("span",{class:t.waybill.startPlan?null:"placeholder",domProps:{innerHTML:t._s(t.waybill.startPlan?t.dateTimeStringStart:"XX/XX/XX, XX:XX")}}),s("img",{staticClass:"icon",attrs:{src:a("01f7")}})]),s("Calendar",{class:t.startTime?null:"hide",attrs:{date:t.waybill.startPlan?new Date(t.waybill.startPlan):t.timeForDatepicker,time:!0,dateFinish:t.unixDateFinish?t.unixDateFinish:null,open:!0},on:{change:t.changeStart,select:t.selectStart}})],1)])]),s("div",{staticClass:"level"},[t._m(4),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item date"},[s("div",{staticClass:"wrapper",class:t.finishTime?"is-active":null,on:{click:t.openFinish}},[s("span",{class:t.waybill.finishPlan?null:"placeholder",domProps:{innerHTML:t._s(t.waybill.finishPlan?t.dateTimeStringFinish:"XX/XX/XX, XX:XX")}}),s("img",{staticClass:"icon",attrs:{src:a("01f7")}})]),s("Calendar",{class:t.finishTime?null:"hide",attrs:{date:t.waybill.finishPlan?new Date(t.waybill.finishPlan):t.timeForDatepicker,time:!0,dateStart:t.unixDateStart?t.unixDateStart:null,open:!0},on:{change:t.changeFinish,select:t.selectFinish}})],1)])]),s("hr"),s("div",{staticClass:"level"},[t._m(5),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.mileageStart,expression:"waybill.mileageStart"}],attrs:{placeholder:"Спидометр в начале смены"},domProps:{value:t.waybill.mileageStart},on:{input:function(e){e.target.composing||t.$set(t.waybill,"mileageStart",e.target.value)}}}),t.lastWb?s("span",{staticClass:"hint"},[t._v("(показание предыдущей смены)")]):s("span",{staticClass:"hint is-danger"},[t._v("Нет данных с предыдущей смены")])])])]),s("div",{staticClass:"level"},[t._m(6),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.fuelStart,expression:"waybill.fuelStart"}],attrs:{placeholder:"Топливо в начале смены"},domProps:{value:t.waybill.fuelStart},on:{input:function(e){e.target.composing||t.$set(t.waybill,"fuelStart",e.target.value)}}}),t.lastWb?s("span",{staticClass:"hint"},[t._v("(показание предыдущей смены)")]):s("span",{staticClass:"hint is-danger"},[t._v("Нет данных с предыдущей смены")])])])])]),s("div",{staticClass:"tile"},[s("Blank",{attrs:{id:t.waybill.id,dateOf:t.waybill.of,model:t.waybill.car&&t.waybill.car.model?t.waybill.car.model:null,registrationPlate:t.waybill.car&&t.waybill.car.registrationPlate?t.waybill.car.registrationPlate:null,serial:t.waybill.serial,driver:t.waybill.driver?t.waybill.driver.name:null,task:t.waybill.workText,mileageLast:t.waybill.mileageStart,fuelLast:t.waybill.fuelStart,dateStart:t.waybill.startPlan,dateFinish:t.waybill.finishPlan}})],1)]),s("hr"),s("div",{staticClass:"task"},[s("span",{staticClass:"title"},[t._v("Задание водителю:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.workText,expression:"waybill.workText"}],attrs:{placeholder:"Задание"},domProps:{value:t.waybill.workText},on:{input:function(e){e.target.composing||t.$set(t.waybill,"workText",e.target.value)}}})]),s("div",{staticClass:"button is-pulled-right",on:{click:function(e){return e.preventDefault(),t.openWb()}}},[t._v("Просмотр")]),t.isLoading?s("b-loading",{attrs:{"is-full-page":!0},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}}):t._e()],1):s("b-loading",{attrs:{"is-fill-page":!0}})],1)])},Nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v("Новый"),a("br"),t._v("путевой лист")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._v("Гос. номер:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._v("Водитель:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._v("Выезд из гаража:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._v("Возвращение в гараж:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("span",[t._v("Спидометр:")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("span",[t._v("Остаток при выезде:")])])])}],Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.range?s("div",{staticClass:"calendar range"},[s("div",{staticClass:"header"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseYear()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.year))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseYear()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"wrapper body"},[s("div",{staticClass:"month-container"},[s("div",{staticClass:"month-selector"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseMonth()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.selectedMonthName))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseMonth()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"body"},[s("table",[t._m(1),s("tbody",t._l(t.weeks,(function(e){return s("tr",t._l(e,(function(e){return s("td",{class:t.compDay==e.unix?"active":null,on:{click:function(a){return t.setDay(e.num)}}},[t._v(t._s(e.num))])})),0)})),0)])])]),s("div",{staticClass:"month-container"},[s("div",{staticClass:"month-selector"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseMonth()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.selectedMonthName))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseMonth()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"body"},[s("table",[t._m(2),s("tbody",t._l(t.weeks,(function(e){return s("tr",t._l(e,(function(e){return s("td",{class:t.compDay==e.unix?"active":null,on:{click:function(a){return t.setDay(e.num)}}},[t._v(t._s(e.num))])})),0)})),0)])])])])]):s("div",{staticClass:"calendar"},[s("div",{staticClass:"header"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseYear()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.year))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseYear()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"month-selector"},[s("div",{staticClass:"trigger",on:{click:function(e){return t.decraseMonth()}}},[s("img",{attrs:{src:a("0a3b")}})]),s("span",[t._v(t._s(t.selectedMonthName))]),s("div",{staticClass:"trigger",on:{click:function(e){return t.incraseMonth()}}},[s("img",{attrs:{src:a("bae1")}})])]),s("div",{staticClass:"body"},[s("table",[t._m(0),s("tbody",t._l(t.weeks,(function(e){return s("tr",t._l(e,(function(e){return e.unix>0?s("td",{staticClass:"calendar-td",class:t.compDay==e.unix?"active":null,on:{click:function(a){return t.setDay(e.num)}}},[t._v(t._s(e.num))]):s("td")})),0)})),0)])]),t.time?s("div",{staticClass:"footer"},[s("div",{staticClass:"timepicker"},[s("div",{staticClass:"trigger incrase",on:{click:function(e){return t.incraseHours()}}},[s("img",{staticClass:"incrase",attrs:{src:a("bae1")}})]),s("div",{staticClass:"day-part"},[t._v(t._s("05"==t.hours||"08"==t.hours||"07"==t.hours?"Утро":"13"==t.hours?"День":"17"==t.hours||"20"==t.hours||"22"==t.hours||"19"==t.hours?"Вечер":""))]),s("div",{staticClass:"hours"},[t._v(t._s(t.hours))]),t._v(":"),s("div",{staticClass:"minutes"},[t._v(t._s(t.minutes))]),s("div",{staticClass:"trigger decrase",on:{click:function(e){return t.decraseHours()}}},[s("img",{staticClass:"incrase",attrs:{src:a("0a3b")}})])])]):t._e()])},It=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("пн")]),a("th",[t._v("вт")]),a("th",[t._v("ср")]),a("th",[t._v("чт")]),a("th",[t._v("пт")]),a("th",[t._v("сб")]),a("th",[t._v("вс")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("пн")]),a("th",[t._v("вт")]),a("th",[t._v("ср")]),a("th",[t._v("чт")]),a("th",[t._v("пт")]),a("th",[t._v("сб")]),a("th",[t._v("вс")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("пн")]),a("th",[t._v("вт")]),a("th",[t._v("ср")]),a("th",[t._v("чт")]),a("th",[t._v("пт")]),a("th",[t._v("сб")]),a("th",[t._v("вс")])])])}],Ut={name:"Calendar",data:function(){return{currentMonth:h.a.num[(new Date).getMonth()],currentYear:(new Date).getFullYear(),curHourIndex:0,hoursList:["05","07","08","13","17","19","20","22"],timepicker:{currentHours:"05",currentMinutes:"00",selectedHours:this.open&&this.date?1=="".concat(new Date(this.date).getHours()).length?"0".concat(new Date(this.date).getHours()):new Date(this.date).getHours():"05",selectedMinutes:"00"},selectedMonth:this.date?1=="".concat(this.date.getMonth()+1).length?"0".concat(this.date.getMonth()+1):this.date.getMonth()+1:null,selectedYear:this.date?this.date.getFullYear():null,currentDay:(new Date).getDate(),selectedDay:this.date?this.date.getDate():null,weeks:[]}},props:["dateStart","dateFinish","time","autograph","range","date","open"],computed:{daysCount:function(){var t=this.selectedYear?this.selectedYear:this.currentYear,e=this.selectedMonth?this.selectedMonth:this.currentMonth;return new Date(t,e,0).getDate()},selectedMonthName:function(){var t=this.selectedMonth?this.selectedMonth:this.currentMonth;return h.a.calendar[t]},compDay:function(){var t="".concat(this.selectedDay).length;return new Date("".concat(this.selectedYear?this.selectedYear:this.currentYear,"-").concat(this.date?this.date.getMonth()+1:this.selectedMonth?this.selectedMonth:this.currentMonth,"-").concat(t>1&&t>2?new Date(this.selectedDay).getDate():this.selectedDay," ").concat(this.timepicker.selectedHours,":00")).getTime()},year:function(){var t=this.selectedYear?this.selectedYear:this.currentYear;return t},hours:function(){var t=this.timepicker.selectedHours?this.timepicker.selectedHours:this.timepicker.currentHours;return t},minutes:function(){var t=this.timepicker.selectedMinutes?1=="".concat(this.timepicker.selectedMinutes).length?"0".concat(this.timepicker.selectedMinutes):this.timepicker.selectedMinutes:1=="".concat(this.minutesRound(this.timepicker.currentMinutes)).length?"0".concat(this.minutesRound(this.timepicker.currentMinutes)):this.minutesRound(this.timepicker.currentMinutes);return t},selectedDate:function(){var t=this.selectedYear?this.selectedYear:this.currentYear,e=this.selectedMonth?this.selectedMonth:this.currentMonth,a=this.selectedDay?new Date(this.selectedDay).getDate():new Date(this.currentDay).getDate(),s=this.timepicker.selectedHours?this.timepicker.selectedHours:this.timepicker.currentHours,i=this.timepicker.selectedMinutes?this.timepicker.selectedMinutes:this.timepicker.currentMinutes;return new Date("".concat(t,"-").concat(e,"-").concat(a,", ").concat(s,":").concat(i))}},methods:Object(z["a"])(Object(z["a"])({},Object(n["b"])("reports",{getAutographReport:"apiAutographReport"})),{},{setDay:function(t){var e=this.selectedYear?this.selectedYear:this.currentYear,a=this.selectedMonth?this.selectedMonth:this.currentMonth;this.selectedDay=new Date("".concat(e,"-").concat(a,"-").concat(t," ").concat(this.timepicker.selectedHours,":00")).getTime(),this.$emit("select",{date:this.selectedDate}),this.autograph&&this.getAutographReport()},decraseYear:function(){var t=this.selectedYear?this.selectedYear-1:this.currentYear-1,e=new Date(t,1,0);this.selectedYear=e.getFullYear(),this.getDays(),this.$emit("change",{date:this.selectedDate})},incraseYear:function(){var t=this.selectedYear?this.selectedYear+1:this.currentYear+1,e=new Date(t,1,0);this.selectedYear=e.getFullYear(),this.getDays(),this.$emit("change",{date:this.selectedDate})},decraseMonth:function(){var t=this.selectedMonth?parseInt(this.selectedMonth,10)-1:parseInt(this.currentMonth,10)-1,e=this.selectedYear?this.selectedYear:this.currentYear,a=new Date(e,t,0);0==t&&this.decraseYear(),this.selectedMonth=h.a.num[a.getMonth()],this.getDays(),this.$emit("change",{date:this.selectedDate})},incraseMonth:function(){var t=this.selectedMonth?parseInt(this.selectedMonth,10)+1:parseInt(this.currentMonth,10)+1,e=this.selectedYear?this.selectedYear:this.currentYear,a=new Date(e,t,0);13==t&&this.incraseYear(),this.selectedMonth=h.a.num[a.getMonth()],this.getDays(),this.$emit("change",{date:this.selectedDate})},incraseHours:function(){this.curHourIndex++,this.curHourIndex>this.hoursList.length-1&&(this.curHourIndex=0),this.timepicker.selectedHours=this.hoursList[this.curHourIndex],this.getDays(),this.$emit("change",{date:this.selectedDate})},decraseHours:function(){this.curHourIndex--,this.curHourIndex<0&&(this.curHourIndex=this.hoursList.length-1),this.timepicker.selectedHours=this.hoursList[this.curHourIndex],this.getDays(),this.$emit("change",{date:this.selectedDate})},minutesRound:function(t){return t%5<3?t%5===0?t:5*Math.floor(t/5):5*Math.ceil(t/5)},getDays:function(){var t,e,a=[],s=this.selectedYear?this.selectedYear:this.currentYear,i=this.selectedMonth?this.selectedMonth:this.currentMonth,n="".concat(this.timepicker.selectedHours,":00"),l=new Date(s,i,0).getDate(),r=new Date("".concat(s,"-").concat(i,"-").concat(l)).getDay(),o=new Date("".concat(s,"-").concat(i,"-1")).getDay(),c=1;t=0!==o?o-1:6,e=(l+t-r+7)/7;for(var u=0;u<=e-1;u++)if(a[u]=[],0==u){for(var h=1;h<=t;h++)a[u].push({unix:0,num:""});for(var d=t+1;d<=7;d++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++}else if(a.length==e){for(var f=1;f<=r;f++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++;for(var g=r+1;g<=7;g++)a[u].push({unix:0,num:""}),c++}else for(var m=1;m<=7;m++)a[u].push({unix:new Date("".concat(s,"-").concat(i,"-").concat(c," ").concat(n)).getTime(),num:c}),c++;this.weeks=a}}),mounted:function(){this.getDays()}},Ht=Ut,At=(a("efb6"),Object(N["a"])(Ht,Rt,It,!1,null,"48275186",null)),Xt=At.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("v-stage",{attrs:{config:t.stageConfig}},[a("v-layer",[a("v-rect",{attrs:{config:t.containerConfig}}),a("v-text",{attrs:{config:{x:101,y:17,text:"ПУТЕВОЙ ЛИСТ",fontFamily:"Montserrat",fontSize:6.50877,fontStyle:700,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:101,y:28.8,text:"грузового автомобиля",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:165.97,y:32.54,width:77.64,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:248.73,y:27.89,text:"№",fontFamily:"Montserrat",fontSize:5.57895,fontStyle:700,fill:"#253238"}}}),t.id?a("v-rect",{attrs:{config:{x:257.1,y:26,width:77.18,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:257.1,y:26,width:77.18,height:7.44,fill:"#F09A9B"}}}),t.dateOf?a("v-rect",{attrs:{config:{x:126.47,y:36,width:25.11,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:126.47,y:36,width:25.11,height:7.44,fill:"#F09A9B"}}}),(t.dateOf,a("v-rect",{attrs:{config:{x:156.21,y:36,width:64.16,height:7.44,fill:"#7FCCC6"}}})),(t.dateOf,a("v-rect",{attrs:{config:{x:224.55,y:36,width:19.06,height:7.44,fill:"#7FCCC6"}}})),a("v-text",{attrs:{config:{x:245.47,y:39.05,text:"года",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:13.95,y:53,text:"Организация",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:41.84,y:55.79,width:359.38,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:45.1,y:50.68,text:"МБУ  Кировский ДЭУ г.Екатеринбург, ул.Вишневая, 69, тел. 374-45-99",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:13.95,y:80.89,text:"Марка автомобиля",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:55.32,y:84.15,width:118.09,height:.464912,fill:"#B0BFC6"}}}),t.model?a("v-rect",{attrs:{config:{x:55.11,y:76.7,width:117.09,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:55.11,y:76.7,width:117.09,height:7.44,fill:"#F09A9B"}}}),a("v-text",{attrs:{config:{x:13.95,y:90.19,text:"Государственный номерной знак",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:83.68,y:93.45,width:89.73,height:.464912,fill:"#B0BFC6"}}}),t.registrationPlate?a("v-rect",{attrs:{config:{x:83.68,y:86.01,width:88.8,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:83.68,y:86.01,width:88.8,height:7.44,fill:"#F09A9B"}}}),a("v-text",{attrs:{config:{x:13.95,y:100.49,text:"Водитель",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:37.19,y:103.28,width:136.22,height:.464912,fill:"#B0BFC6"}}}),t.driver?a("v-rect",{attrs:{config:{x:38.12,y:95.38,width:134.36,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:38.12,y:95.38,width:134.36,height:7.44,fill:"#F09A9B"}}}),a("v-text",{attrs:{config:{x:13.95,y:108.79,text:"Удостоверение №",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:55.32,y:111.58,width:91.12,height:.464912,fill:"#B0BFC6"}}}),t.serial?a("v-rect",{attrs:{config:{x:55.18,y:104.41,width:90.12,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:55.18,y:104.41,width:90.12,height:7.44,fill:"#F09A9B"}}}),a("v-text",{attrs:{config:{x:150.17,y:108.79,text:"Класс",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:169.23,y:111.58,width:42.31,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:13.95,y:118.09,text:"Лицензионная карточка",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:65.09,y:120.88,width:146.45,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:13.95,y:127.39,text:"Регистрационный №",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:58.58,y:130.18,width:39.52,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:101.35,y:127.39,text:"Серия",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:115.3,y:130.18,width:29.75,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:148.77,y:127.39,text:"№",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:156.21,y:130.18,width:55.32,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:13.95,y:136.68,text:"Прицеп 1",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:33.47,y:139.47,width:29.75,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:65.55,y:136.68,text:"Гос. номерной знак",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:105.54,y:139.47,width:29.75,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:139.01,y:136.68,text:"Гаражный номер",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:176.67,y:139.47,width:34.87,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:13.95,y:145.98,text:"Прицеп 2",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:33.47,y:148.77,width:29.75,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:65.55,y:145.98,text:"Гос. номерной знак",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:105.54,y:148.77,width:29.75,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:139.01,y:145.98,text:"Гаражный номер",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:176.67,y:148.77,width:34.87,height:.464912,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:13.95,y:155.28,text:"Сопровождающие лица:",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:85.08,y:164.58,text:"ЗАДАНИЕ ВОДИТЕЛЮ",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:13.95,y:172.48,width:197.59,height:39.51,stroke:"#B0BFC6",strokeWidth:.5}}}),a("v-text",{attrs:{config:{x:47.89,y:176.67,text:"в чье распоряжение\n(наименование и адрес заказчика)",align:"center",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:150.63,y:174.81,text:"время, ч., мин.",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:187.5,y:174.81,text:"количество",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:147,y:183.64,text:"прибытия",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:168,y:183.64,text:"убытия",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:185.5,y:183.64,text:"часов",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:199.4,y:183.64,text:"ездок",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:13.95,y:190.15,width:197.59,height:11.62,stroke:"#B0BFC6",strokeWidth:.5}}}),a("v-rect",{attrs:{config:{x:144.59,y:172.5,width:39.05,height:39.51,stroke:"#B0BFC6",strokeWidth:.5}}}),a("v-rect",{attrs:{config:{x:145.05,y:181.32,width:66.48,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:165.97,y:181.5,height:30.5,width:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:197.59,y:181.5,height:30.5,width:.5,fill:"#B0BFC6"}}}),t.task?a("v-rect",{attrs:{config:{x:16.74,y:192.47,width:126.46,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:16.74,y:192.47,width:126.46,height:7.44,fill:"#F09A9B"}}}),a("v-text",{attrs:{config:{x:13.95,y:219.44,text:"Водительское удостоверение проверил,\nзадание выдал, выдать горючего",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:94.84,y:227.81,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:143.19,y:224.55,text:"литров",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:13.95,y:234.32,text:"Диспетчер",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:39.05,y:237.57,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:51.14,y:233.85,text:"Ильина Н.В.",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:700,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:13.95,y:242.68,text:"Водитель по состоянию здоровья\nк управлению допущен",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:84.15,y:251.05,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:88.33,y:246.4,text:"Мещерякова Е.С.",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:700,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:223.16,y:65.09,width:242.68,height:55.79,stroke:"#B0BFC6",strokeWidth:.2}}}),a("v-text",{attrs:{config:{x:310.61,y:68.41,text:"Работа водителя и автомобиля",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:223.16,y:74.39,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:278.95,y:74.39,width:.5,height:46.03,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:297.08,y:83.68,width:.5,height:36.73,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:316.14,y:83.68,width:.5,height:36.73,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:334.27,y:83.68,width:.5,height:36.73,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:353.33,y:74.39,width:.5,height:46.03,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:380.76,y:74.39,width:.5,height:46.03,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:418.42,y:74.39,width:.5,height:46.03,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:279.41,y:83.68,width:73.92,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:92.98,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:102.28,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:111.58,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:239.04,y:82.36,text:"операция",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:298.94,y:76.71,text:"время по графику",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:282.67,y:87.01,text:"число",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:301.26,y:87.01,text:"месяц",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:322.18,y:87.01,text:"час",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:339.85,y:87.01,text:"мин",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:358,y:78.32,text:"нулевой\nпробег,\nкм",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:387.27,y:78.12,text:"показание\nспидометра,\nкм",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:423.07,y:78.12,text:"время фактическое\nчисло, месяц, ч., мин",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:247.33,y:96.31,text:"1",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:287.32,y:96.31,text:"2",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:306.38,y:96.31,text:"3",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:324.04,y:96.31,text:"4",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:343.11,y:96.31,text:"5",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:364.96,y:96.31,text:"6",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:398.43,y:96.31,text:"7",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:441.67,y:96.31,text:"8",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:226.02,y:105.54,text:"выезд из гаража",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:226.02,y:114.97,text:"возвращение в гараж",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),t.dateStart?a("v-rect",{attrs:{config:{x:280.46,y:103.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:280.46,y:103.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateStart?a("v-rect",{attrs:{config:{x:299,y:103.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:299,y:103.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateStart?a("v-rect",{attrs:{config:{x:317.5,y:103.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:317.5,y:103.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateStart?a("v-rect",{attrs:{config:{x:336,y:103.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:336,y:103.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateFinish?a("v-rect",{attrs:{config:{x:280.46,y:112.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:280.46,y:112.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateFinish?a("v-rect",{attrs:{config:{x:299,y:112.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:299,y:112.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateFinish?a("v-rect",{attrs:{config:{x:317.5,y:112.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:317.5,y:112.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.dateFinish?a("v-rect",{attrs:{config:{x:336,y:112.5,width:15.5,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:336,y:112.5,width:15.5,height:7.44,fill:"#F09A9B"}}}),t.mileageLast?a("v-rect",{attrs:{config:{x:384.02,y:103.35,width:31.15,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:384.02,y:103.35,width:31.15,height:7.44,fill:"#F09A9B"}}}),a("v-rect",{attrs:{config:{x:223.16,y:130.18,width:242.68,height:55.79,stroke:"#B0BFC6",strokeWidth:.2}}}),a("v-text",{attrs:{config:{x:323.75,y:132.96,text:"Движение горючего",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:223.16,y:139.47,width:194.8,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:241.75,y:148.77,width:.5,height:37.19,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:260.35,y:139.47,width:.5,height:46.49,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:283.6,y:139.47,width:.5,height:46.49,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:315.68,y:148.77,width:.5,height:37.19,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:348.68,y:139.47,width:.5,height:46.49,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:367.28,y:139.47,width:.5,height:46.49,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:417.96,y:130.18,width:.5,height:55.79,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:441.67,y:148.77,width:.5,height:37.19,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:148.77,width:37.19,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:283.6,y:148.77,width:65.09,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:417.96,y:148.77,width:47.89,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:158.07,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:167.37,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-rect",{attrs:{config:{x:223.16,y:176.67,width:242.68,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:228.67,y:161.39,text:"Д/т",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:234.32,y:142.8,text:"прочее",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:226.41,y:151.7,text:"марка",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:245.4,y:149.7,text:"код\nмарки",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:263.14,y:149.7,text:"выдано,\nл",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:305.45,y:142.8,text:"остаток при",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:290.57,y:149.7,text:"выезде,\nл",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:318,y:149.7,text:"возвращении,\nл",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:352.4,y:149.7,text:"сдано,\nл",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:379.3,y:143.73,text:"коэффициент\nизменения\nнормы",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:429.58,y:135.75,text:"время работы,\nч. мин.",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:419.35,y:150.24,text:"спецобору\nдования",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),a("v-text",{attrs:{config:{x:443.99,y:151.1,text:"двигателя",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238",align:"center"}}}),t.fuelLast?a("v-rect",{attrs:{config:{x:291.04,y:159.34,width:17.2,height:7.44,fill:"#7FCCC6"}}}):a("v-rect",{attrs:{config:{x:291.04,y:159.34,width:17.2,height:7.44,fill:"#F09A9B"}}}),a("v-text",{attrs:{config:{x:228.27,y:196.19,text:"Автомобиль технически исправен.\nВыезд разрешен. Механик",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:302.19,y:204.56,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:304.05,y:198.98,text:"Беляев",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:228.27,y:215.25,text:"Автомобиль принял. Водитель",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:302.66,y:218.97,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:304.05,y:213.39,text:"Садыков А.Р.",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:228.27,y:229.2,text:"При возвращении автомобиль ",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:302.19,y:228.27,text:"исправен",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238",textDecoration:"underline"}}}),a("v-text",{attrs:{config:{x:302.19,y:233.85,text:"неисправен",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:228.27,y:247.8,text:"Сдал водитель",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:260.82,y:251.52,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:261.28,y:245.94,text:"Садыков А.Р.",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238"}}}),a("v-text",{attrs:{config:{x:330.09,y:247.8,text:"Принял механик",fontFamily:"Montserrat",fontSize:3.7193,fontStyle:400,fill:"#253238"}}}),a("v-rect",{attrs:{config:{x:367.28,y:251.52,width:46.03,height:.5,fill:"#B0BFC6"}}}),a("v-text",{attrs:{config:{x:367.75,y:245.94,text:"Беляев",fontFamily:"Montserrat",fontSize:4.64912,fontStyle:700,fill:"#253238"}}})],1)],1)],1)},qt=[],Kt={name:"WbBlank",data:function(){return{stageConfig:{width:472,height:260},containerConfig:{x:0,y:0,width:472,height:260,stroke:"#B0BFC6",strokeWidth:1}}},props:["id","dateOf","dateStart","dateFinish","registrationPlate","serial","model","driver","task","mileageLast","fuelLast"],beforeMount:function(){}},Vt=Kt,Zt=Object(N["a"])(Vt,Jt,qt,!1,null,null,null),Gt=Zt.exports,Qt={name:"CreateWaybill",components:{Calendar:Xt,Blank:Gt},data:function(){return{startTime:!1,finishTime:!1,ofTime:!1,isLoading:!1,registrationPlate:null,carSerial:null,driver:null,lastWb:null,mode:"production",plates:null,drivers:null}},watch:{waybill:function(){this.waybill&&!this.waybill.driver&&(this.waybill.driver={name:null}),this.waybill&&!this.waybill.car&&(this.waybill.car={registrationPlate:null,model:null}),this.lastWb&&(this.waybill.mileageStart=this.lastWb.mileageFinish,this.waybill.fuelStart=this.lastWb.fuelFinish)}},computed:Object(z["a"])(Object(z["a"])({},Object(n["c"])("waybills",{listDrivers:"getNewListDrivers",listCar:"getNewListCar",waybill:"getNewWaybill"})),{},{timeForDatepicker:function(){return new Date("".concat((new Date).getFullYear(),"-").concat((new Date).getMonth(),"-").concat((new Date).getDate()," 05:00"))},unixDateStart:function(){return this.waybill.startPlan?new Date(this.waybill.start).getTime():null},unixDateFinish:function(){return this.waybill.finishPlan?new Date(this.waybill.finishPlan).getTime():null},dateStringOf:function(){var t=new Date(this.waybill.of),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear())},fuelStart:function(){return this.lastWb.fuelStart},mileageStart:function(){return this.lastWb.mileageStart},dateTimeStringStart:function(){var t=new Date(this.waybill.startPlan),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate(),a=1=="".concat(t.getHours()).length?"0".concat(t.getHours()):t.getHours(),s=1=="".concat(t.getMinutes()).length?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear(),",&nbsp;").concat(a,":").concat(s)},dateTimeStringFinish:function(){var t=new Date(this.waybill.finishPlan),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate(),a=1=="".concat(t.getHours()).length?"0".concat(t.getHours()):t.getHours(),s=1=="".concat(t.getMinutes()).length?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear(),",&nbsp;").concat(a,":").concat(s)},formData:function(){return{id:this.waybill.id?this.waybill.id:null,of:this.waybill.of?this.waybill.of:null,car:this.waybill.car?this.waybill.car:null,serial:this.waybill.car.serial?this.waybill.car.serial:null,workText:this.waybill.workText?this.waybill.workText:null,driverId:this.waybill.driverId?this.waybill.driverId:null,startPlan:this.waybill.startPlan?this.waybill.startPlan:null,finishPlan:this.waybill.finishPlan?this.waybill.finishPlan:null,mileageStart:this.waybill.mileageStart?this.waybill.mileageStart:null,fuelStart:this.waybill.fuelStart?this.waybill.fuelStart:null}}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({openWb:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.error=!1,a=!!t.waybill.driver&&t.waybill.driver.name,t.waybill.id&&t.waybill.of&&t.waybill.car.registrationPlate&&a&&t.waybill.fuelStart&&t.waybill.mileageStart&&t.waybill.workText&&t.waybill.startPlan&&t.waybill.finishPlan){e.next=4;break}return e.abrupt("return",m["a"].open({message:"Не все поля заполнены или заполнены неверно!"}));case 4:t.setNewWaybill({waybill:t.waybill}),t.$router.push({name:"PreviewWaybill"});case 6:case"end":return e.stop()}}),e)})))()}},Object(n["b"])("waybills",{getNewWaybill:"getNewWaybillData"})),Object(n["d"])("waybills",{setListDrivers:"setListDrivers",setListCars:"setListCars",setNewWaybill:"setAllNewWaybillData",setPlate:"setNewWbRegistrationPlate",setDriverName:"setNewWbDriverName",setCar:"setNewWbCar"})),{},{filterDriver:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,p.getDrivers(t.target.value).then((function(t){return e.drivers=t.data}));case 2:case"end":return a.stop()}}),a)})))()},filterPlates:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,p.getPlates(t.target.value).then((function(t){return e.plates=t.data}));case 2:case"end":return a.stop()}}),a)})))()},getLastWb:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return document.querySelector("#registrationPlate").value="",a.next=3,p.getLastWb({serial:t}).then((function(t){e.lastWb=t.data,localStorage.lastWb=JSON.stringify(t.data),e.lastWb&&(e.waybill.mileageStart=e.lastWb.mileageFinish,e.waybill.fuelStart=e.lastWb.fuelFinish)}));case 3:case"end":return a.stop()}}),a)})))()},selectStart:function(t){this.waybill.startPlan=t.date.getTime();var e=new Date(this.waybill.startPlan).getDate(),a=new Date(this.waybill.startPlan).getMonth(),s=new Date(this.waybill.startPlan).getFullYear(),i=new Date(this.waybill.startPlan).getHours();switch(i){case 5:this.waybill.finishPlan=new Date("".concat(s,"-").concat(a+1,"-").concat(e," 13:00")).getTime();break;case 8:this.waybill.finishPlan=new Date("".concat(s,"-").concat(a+1,"-").concat(e," 17:00")).getTime();break;case 7:this.waybill.finishPlan=new Date("".concat(s,"-").concat(a+1,"-").concat(e," 17:00")).getTime();break;case 20:this.waybill.finishPlan=new Date("".concat(s,"-").concat(a+1,"-").concat(e+1," 05:00")).getTime();break;case 22:this.waybill.finishPlan=new Date("".concat(s,"-").concat(a+1,"-").concat(e+1," 07:00")).getTime();break}this.startTime=!1},selectFinish:function(t){this.waybill.finishPlan=t.date.getTime(),this.finishTime=!1},changeStart:function(t){this.waybill.startPlan=t.date.getTime()},changeFinish:function(t){this.waybill.finishPlan=t.date.getTime()},selectOf:function(t){this.waybill.of=t.date.getTime(),this.ofTime=!1},changeOf:function(t){this.waybill.of=t.date.getTime()},openOf:function(){this.ofTime=!this.ofTime,this.startTime=!1,this.finishTime=!1},openStart:function(){this.startTime=!this.startTime,this.finishTime=!1,this.ofTime=!1},openFinish:function(){this.finishTime=!this.finishTime,this.startTime=!1,this.ofTime=!1},close:function(t){t.target.matches(".date *")||t.target.matches("span.date-of")||t.target.matches(".calendar *")||(this.startTime&&(this.startTime=!1),this.finishTime&&(this.finishTime=!1),this.ofTime&&(this.ofTime=!1))},changeWidthId:function(){this.waybill.id},setRegistrationPlate:function(t){this.registrationPlate=t.registrationPlate,this.waybill.serial=t.serial,this.waybill.car=t},setDriver:function(t){document.querySelector("#driver").value="",t?(this.driver=t.name,this.waybill.driver=t,this.waybill.driverID=t.id):(this.waybill.driver=null,this.waybill.driverID=null)}}),beforeMount:function(){var t=this;this.waybill||(this.isLoading=!0,this.getNewWaybill().then((function(){return t.isLoading=!1}))),this.registrationPlate&&this.getLastWb(this.waybill.serial)},mounted:function(){localStorage.lastWb&&null!==localStorage.lastWb&&"null"!==localStorage.lastWb&&(this.lastWb=JSON.parse(localStorage.lastWb)),this.waybill&&!this.waybill.driver&&(this.waybill.driver={},this.waybill.driver.name=null),this.waybill&&(this.waybill.of=(new Date).getTime()),this.waybill&&!this.waybill.car&&(this.waybill.car={registrationPlate:null,model:null})}},te=Qt,ee=Object(N["a"])(te,$t,Nt,!1,null,null,null),ae=ee.exports,se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main"},on:{click:t.close}},[s("div",{staticClass:"container",attrs:{id:"close"}},[s("div",{staticClass:"section"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[t._v("№"),s("form",{on:{submit:function(e){e.preventDefault(),t.getWaybill(t.wbId).then((function(){return t.hint=!1}))}}},[s("b-tooltip",{attrs:{active:t.hint,label:"Нажмите Enter",position:"is-bottom",type:"is-white",size:"is-small",multilined:"",always:""}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.wbId,expression:"wbId"}],staticClass:"id",attrs:{placeholder:"ID",type:"number"},domProps:{value:t.wbId},on:{input:[function(e){e.target.composing||(t.wbId=e.target.value)},t.showHint],keyup:t.changeWidthId}})])],1)])]),s("div",{staticClass:"level-right"},[t.closeWaybill?s("div",{staticClass:"level-item"},[t._v("от"),s("span",[t._v(t._s(t.dateStringOf?t.dateStringOf:"XX/XX/XXXX"))])]):t._e()])])])])]),s("hr"),t.closeWaybill?s("div",{staticClass:"wrapper"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"level"},[t._m(1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.car.registrationPlate,expression:"waybill.car.registrationPlate"}],domProps:{value:t.waybill.car.registrationPlate},on:{input:[function(e){e.target.composing||t.$set(t.waybill.car,"registrationPlate",e.target.value)},function(e){return t.getSerial(t.waybill.car.registrationPlate)}]}}),s("img",{staticClass:"icon",attrs:{src:a("01f7")}}),t.results?s("div",{staticClass:"get-serial"},[s("div",{staticClass:"columns is-multiline is-flex"},t._l(t.results,(function(e){return s("div",{staticClass:"column is-6"},[s("div",{staticClass:"item",on:{click:function(a){return t.getWb(e.serial,e.registrationPlate)}}},[t._v(t._s(e.registrationPlate))])])})),0)]):t._e()])])])])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"level"},[t._m(2),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t._v(t._s(t.waybill.driver?t.waybill.driver.name:""))])])])])])]),s("hr"),s("table",{staticClass:"table"},[t._m(3),s("tbody",[s("tr",[s("td",{staticClass:"title"},[t._v("Выдано")]),s("td"),s("td"),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.fuelVolume,expression:"waybill.fuelVolume"}],attrs:{placeholder:"ЗАПОЛНИ!"},domProps:{value:t.waybill.fuelVolume},on:{input:function(e){e.target.composing||t.$set(t.waybill,"fuelVolume",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"title"},[t._v("Выезд")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.mileageStart,expression:"waybill.mileageStart"}],attrs:{placeholder:"ЗАПОЛНИ!"},domProps:{value:t.waybill.mileageStart},on:{input:function(e){e.target.composing||t.$set(t.waybill,"mileageStart",e.target.value)}}})]),s("td",{staticClass:"date-start"},[s("span",{domProps:{innerHTML:t._s(t.dateTimeStringStart)},on:{click:function(e){return t.toggleCalStart()}}}),t.waybill.startFact?s("Calendar",{class:t.showCalStart?"":"is-hidden",attrs:{range:!1,time:!0,date:new Date(t.waybill.startFact)},on:{select:t.setTimeStart}}):t._e()],1),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.fuelStart,expression:"waybill.fuelStart"}],attrs:{placeholder:"ЗАПОЛНИ!"},domProps:{value:t.waybill.fuelStart},on:{input:function(e){e.target.composing||t.$set(t.waybill,"fuelStart",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"title"},[t._v("Возвращение")]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.milleageFinish,expression:"milleageFinish"}],staticClass:"finish",attrs:{type:"number",placeholder:"ЗАПОЛНИ!"},domProps:{value:t.milleageFinish},on:{keyup:t.changeWidth,input:function(e){e.target.composing||(t.milleageFinish=e.target.value)}}})]),s("td",{staticClass:"date-finish"},[s("span",{domProps:{innerHTML:t._s(t.dateTimeStringFinish)},on:{click:t.toggleCalEnd}}),t.waybill.finishFact?s("Calendar",{class:t.showCalEnd?"":"is-hidden",attrs:{range:!1,time:!0,date:new Date(t.waybill.finishFact)},on:{select:t.setTimeFinish}}):t._e()],1),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.fuelFinish,expression:"waybill.fuelFinish"}],domProps:{value:t.waybill.fuelFinish},on:{input:function(e){e.target.composing||t.$set(t.waybill,"fuelFinish",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"title"},[t._v("Общий пробег/расход")]),s("td",[s("span",[t._v(t._s(t.milleageFinish?(t.milleageFinish-t.waybill.mileageStart).toLocaleString():null))])]),s("td"),s("td",[s("span",[t._v(t._s(t.totalFuel?t.totalFuel:""))])])])])]),s("hr"),s("p",{staticClass:"title"},[t._v("Выполнение задания:")]),s("p",{staticClass:"subtitle"},[t._v("Объект УДС")]),s("div",{staticClass:"inputs-wrapper"},[t._l(t.uts,(function(e,i){return s("div",{staticClass:"input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.uts[i],expression:"uts[key]"}],domProps:{value:t.uts[i]},on:{input:function(e){e.target.composing||t.$set(t.uts,i,e.target.value)}}}),i>0?s("img",{attrs:{src:a("0d45")},on:{click:function(e){return t.removeUts(i)}}}):t._e()])})),s("img",{attrs:{src:a("76a4")},on:{click:t.addUts}})],2),s("div",{staticClass:"button is-pulled-right",on:{click:t.closeWb}},[t._v("Закрыть")])]):t._e()])])])},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v("Закрываем"),a("br"),t._v("путевой лист")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._v("Гос. номер:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t._v("Водитель:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),a("th",[t._v("Спидометр")]),a("th",[t._v("Дата/время/час")]),a("th",[t._v("Горючее")])])])}],ne=(a("a434"),{name:"CloseWaybill",data:function(){return{startTime:!1,finishTime:!1,isLoading:!1,wbId:this.num,milleageFinish:null,uts:[""],showResults:!0,results:null,showCalStart:!1,showCalEnd:!1,hint:!1}},components:{Calendar:Xt},props:{num:{default:null}},computed:Object(z["a"])(Object(z["a"])({},Object(n["c"])("waybills",{closeWaybill:"getCloseWaybill"})),{},{waybill:function(){return this.closeWaybill?this.closeWaybill:null},totalFuel:function(){return parseInt(this.waybill.fuelStart)+parseInt(this.waybill.fuelVolume)-parseInt(this.waybill.fuelFinish)},dateStringOf:function(){if(this.waybill){var t=new Date(this.waybill.of),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear())}return null},dateTimeStringStart:function(){var t=new Date(this.waybill.startFact),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate(),a=1=="".concat(t.getHours()).length?"0".concat(t.getHours()):t.getHours(),s=1=="".concat(t.getMinutes()).length?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear(),",&nbsp;").concat(a,":").concat(s)},dateTimeStringFinish:function(){var t=new Date(this.waybill.finishFact),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate(),a=1=="".concat(t.getHours()).length?"0".concat(t.getHours()):t.getHours(),s=1=="".concat(t.getMinutes()).length?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear(),",&nbsp;").concat(a,":").concat(s)}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({showHint:function(){var t=this;this.hint=!1,setTimeout((function(){t.hint=!0}),5e3)}},Object(n["b"])("waybills",{getWaybill:"apiCloseWaybill",getWbBySerial:"apiLastOpenWb"})),Object(n["d"])("waybills",["setCloseWaybill"])),{},{setTimeStart:function(t){this.waybill.startFact=t.date},setTimeFinish:function(t){this.waybill.finishFact=t.date},toggleCalStart:function(){this.showCalStart=!this.showCalStart},toggleCalEnd:function(){this.showCalEnd=!this.showCalEnd},getSerial:function(t){var e=this;0!==t.length?p.getPlates(t).then((function(t){0==t.data.listCar.length?e.results=!1:e.results=t.data.listCar})):this.results=!1},getWb:function(t,e){var a=this;this.getWbBySerial(t).then((function(){return a.results=null})),this.waybill.car.registrationPlate=e},closeWb:function(){var t=this,e={};for(var a in e.id=this.wbId||this.waybill.id,e.of=this.waybill.of,e.fuelVolume=this.waybill.fuelVolume,e.mileageStart=this.waybill.mileageStart,e.mileageFinish=this.milleageFinish,e.mileageTotal=this.milleageFinish-this.waybill.mileageStart,e.fuelTotal=this.totalFuel,e.startFact=this.waybill.startFact,e.finishFact=this.waybill.finishFact,e.status="CLOSE",e.workText=this.uts,e)if(!e[a])return m["a"].open({message:"Заполните все поля!"});var s,i=Object(M["a"])(this.uts);try{for(i.s();!(s=i.n()).done;){var n=s.value;if(!n)return m["a"].open({message:"Заполните все поля!"})}}catch(l){i.e(l)}finally{i.f()}this.waybill.mileageTotal=e.mileageTotal,this.waybill.mileageFinish=this.milleageFinish,this.waybill.fuelTotal=e.fuelTotal,p.closeWaybill(this.waybill).then((function(){m["a"].open({message:"Путевой лист отправлен на проверку!"}),t.setCloseWaybill(null),t.$router.push("/waybills")})).catch((function(t){return console.error(t)}))},addUts:function(){this.uts.push("")},removeUts:function(t){this.uts.splice(t,1)},changeWidth:function(){if(this.milleageFinish){var t=12*this.milleageFinish.length;document.querySelector(".finish").style.width="".concat(t,"px"),this.milleageFinish=this.milleageFinish.toLocaleString()}else document.querySelector(".finish").style.width="0px"},changeWidthId:function(){this.wbId},close:function(t){t.target.matches(".dropdown *")||(this.openedDropdown=!1),t.target.matches(".date-start *")||(this.showCalStart=!1),t.target.matches(".date-finish *")||(this.showCalEnd=!1)}}),beforeMount:function(){var t=this;this.num?(this.isLoading=!0,this.getWaybill(this.num).then((function(){return t.isLoading=!1}))):this.waybill||this.$router.push("/waybills?status=opened"),this.waybill&&this.waybill.id&&(this.wbId=this.waybill.id)}}),le=ne,re=Object(N["a"])(le,se,ie,!1,null,null,null),oe=re.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container",attrs:{id:"preview"},on:{click:t.close}},[s("div",{staticClass:"section"},[t._m(0),s("hr"),t.waybill?s("div",{staticClass:"container",attrs:{id:"wb"}},[s("div",{staticClass:"head"},[s("p",{staticClass:"title"},[t._v("ПУТЕВОЙ ЛИСТ")]),s("div",{staticClass:"num flex-input"},[s("p",[t._v("грузового автомобиля")]),s("input"),s("p",{staticClass:"has-text-weight-bold"},[t._v("№")]),s("input",{domProps:{value:t.waybill.id},on:{input:t.setId}})]),s("div",{staticClass:"date flex-input"},[s("input",{attrs:{type:"number"},domProps:{value:t.dayOf},on:{input:t.setDay}}),s("div",{staticClass:"month"},[s("p",{staticClass:"is-lowercase",on:{click:t.toggleMonthSelector}},[t._v(" "+t._s(t.monthOf))]),s("div",{staticClass:"month-selector dropdown",class:t.showMonthSelector?"":"is-hidden"},t._l(t.monthList,(function(e){return s("p",{key:e.num,class:e.num==t.monthOfNum?"selected":"",on:{click:function(a){return t.setMonth(e.num)}}},[t._v(t._s(e.name))])})),0)]),s("input",{attrs:{type:"number"},domProps:{value:t.yearOf},on:{input:t.setYear}}),s("p",[t._v("года")])])]),t._m(1),s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent"},[s("div",{staticClass:"tile is-child"},[s("div",{staticClass:"model flex-input"},[s("p",[t._v("Марка автомобиля")]),s("p",{staticClass:"info is-capitalized"},[t._v(t._s(t.waybill.car.model))])]),s("div",{staticClass:"plate flex-input"},[s("p",[t._v("Государственный номерной знак")]),s("div",{staticClass:"input-container"},[s("input",{staticClass:"is-lowercase",attrs:{id:"car",disabled:!(!t.waybill.car||!t.waybill.car.registrationPlate)},on:{input:t.getSerial}}),t.waybill.car&&t.waybill.car.registrationPlate?s("div",{staticClass:"tag is-lowercase",on:{click:function(e){t.setRegistrationPlate({serial:null,registrationPlate:null}),t.setNull("#car")}}},[t._v(t._s(t.waybill.car?t.waybill.car.registrationPlate:"")),s("img",{staticClass:"delete",attrs:{src:a("0d45")}})]):t._e()]),t.plates?s("div",{staticClass:"plates dropdown"},t._l(t.plates,(function(e){return s("p",{class:t.waybill.car&&e.serial==t.waybill.car.serial?"selected":null,on:{click:function(a){t.setCar(e),t.plates=null}}},[t._v(" "+t._s(e.registrationPlate))])})),0):t._e()]),s("div",{staticClass:"driver flex-input"},[s("p",[t._v("Водитель")]),s("div",{staticClass:"input-container"},[s("input",{attrs:{id:"driver",disabled:!(!t.waybill.driver||!t.waybill.driver.name)},on:{input:t.getDriver}}),t.waybill.driver&&t.waybill.driver.name?s("div",{staticClass:"tag",on:{click:function(e){t.setDriver(null),t.setNull("#driver")}}},[t._v(t._s(t.waybill.driver?t.waybill.driver.name:"")),s("img",{staticClass:"delete",attrs:{src:a("0d45")}})]):t._e()]),t.drivers?s("div",{staticClass:"drivers dropdown"},t._l(t.drivers,(function(e){return s("p",{class:t.waybill.driver&&e.id==t.waybill.driver.id?"selected":null,on:{click:function(a){t.setDriver(e),t.drivers=null}}},[t._v(t._s(e.name))])})),0):t._e()]),s("div",{staticClass:"ticket flex-input"},[s("p",[t._v("Удостоверение №")]),s("p",{staticClass:"info"},[t._v(t._s(t.waybill.serial))]),s("p",[t._v("Класс")]),s("p",{staticClass:"info"})]),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),s("table",{staticClass:"table is-bordered is-fullwidth"},[t._m(8),s("tr",[s("td",[s("input",{domProps:{value:t.waybill.workText},on:{input:t.setTask}})]),s("td"),s("td")]),t._m(9)]),t._m(10),t._m(11),t._m(12)]),s("div",{staticClass:"tile is-child"},[t._m(13),s("table",{staticClass:"first table is-fullwidth is-bordered"},[t._m(14),t._m(15),s("tr",[s("td",[t._v("выезд из гаража")]),s("td",[s("table",[s("tr",{staticClass:"time"},[s("td",[t._v(t._s(t.startDate))]),s("td",[t._v(t._s(t.startMonth))]),s("td",[t._v(t._s(t.startHours))]),s("td",[t._v(t._s(t.startMinutes))])])])]),s("td"),s("td",[s("input",{domProps:{value:t.waybill.mileageStart}})]),s("td")]),s("tr",[s("td",[t._v("возвращение в гараж")]),s("td",[s("table",[s("tr",{staticClass:"time"},[s("td",[t._v(t._s(t.finishDate))]),s("td",[t._v(t._s(t.finishMonth))]),s("td",[t._v(t._s(t.finishHours))]),s("td",[t._v(t._s(t.finishMinutes))])])])]),s("td"),s("td"),s("td")])]),s("table",{staticClass:"second table is-bordered is-fullwidth"},[t._m(16),s("tr",[s("td",[s("table",{staticClass:"table is-fullwidth need-border"},[s("tr",[s("td",{staticClass:"other"},[s("table",{staticClass:"table is-fullwidth"},[s("tr",[s("td",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.waybill.car?t.waybill.car.fuelType:""))]),s("td")])])]),s("td",{staticClass:"given"}),s("td",{staticClass:"remain"},[s("table",{staticClass:"table is-fullwidth"},[s("tr",[s("td",[s("input",{domProps:{value:t.waybill.fuelStart},on:{input:t.setFuelStart}})]),s("td")])])]),s("td",{staticClass:"passoff"}),s("td",{staticClass:"factor"})])])]),t._m(17)]),t._m(18),t._m(19)]),t._m(20),s("div",{staticClass:"take-driver flex-input"},[s("p",[t._v("Автомобиль принял. Водитель")]),s("p",{staticClass:"info is-capitalized"},[t._v(t._s(t.waybill.driver?t.waybill.driver.name:""))])]),t._m(21),s("div",{staticClass:"wb-footer flex-input"},[s("p",[t._v("Сдал водитель")]),s("p",{staticClass:"info is-capitalized"},[t._v(t._s(t.waybill.driver?t.waybill.driver.name:""))]),s("p",[t._v("Принял механик")]),s("p",{staticClass:"info"})])])])])]):t._e(),t.opened?t._e():s("div",{staticClass:"button is-pulled-right",on:{click:t.open}},[t._v("Создать")]),t.opened?s("div",{staticClass:"button is-pulled-right",staticStyle:{"margin-right":"2rem"},on:{click:t.print}},[t._v("Печать")]):t._e()])])])},ue=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v("Предварительный"),a("br"),t._v("просмотр")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"organisation flex-input"},[a("p",[t._v("Организация")]),a("p",{staticClass:"info"},[t._v("МБУ Кировский ДЭУ г. Екатеринбург, ул. Вишневая, 69, тел. 374-45-99")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"license-card flex-input"},[a("p",[t._v("Лицензионная карточка")]),a("p",{staticClass:"info"},[t._v("стандартная")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-num flex-input"},[a("p",[t._v("Регистрационный №")]),a("p",{staticClass:"info"}),a("p",[t._v("Серия")]),a("p",{staticClass:"info"}),a("p",[t._v("№")]),a("p",{staticClass:"info"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trailer flex-input"},[a("p",[t._v("Прицеп 1")]),a("p",{staticClass:"info"}),a("p",[t._v("Гос. номерной знак")]),a("p",{staticClass:"info"}),a("p",[t._v("Гаражный номер")]),a("p",{staticClass:"info"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"trailer flex-input"},[a("p",[t._v("Прицеп 2")]),a("p",{staticClass:"info"}),a("p",[t._v("Гос. номерной знак")]),a("p",{staticClass:"info"}),a("p",[t._v("Гаражный номер")]),a("p",{staticClass:"info"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"faces flex-input"},[a("p",[t._v("Сопровождающие лица:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pre-table-title"},[a("p",{staticClass:"is-uppercase"},[t._v("ЗАДАНИЕ ВОДИТЕЛЮ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("в чье распоряжение"),a("br"),t._v("(наименование и адрес заказчика)")]),a("td",[a("p",[t._v("время, ч., мин.")]),a("table",[a("tr",[a("td",[t._v("прибытия")]),a("td",[t._v("убытия")])])])]),a("td",[a("p",[t._v("количество")]),a("table",[a("tr",[a("td",[t._v("часов")]),a("td",[t._v("ездок")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td"),a("td"),a("td")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check flex-input"},[a("p",[t._v(" Водительское удостоверение проверил,"),a("br"),t._v("задание выдал, выдать горючего")]),a("p",{staticClass:"info"}),a("p",[t._v("литров")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dispetcher flex-input"},[a("p",[t._v("Диспетчер")]),a("p",{staticClass:"info"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"health flex-input"},[a("p",[t._v(" Водитель по состоянию здоровья"),a("br"),t._v("к управлению допущен")]),a("p",{staticClass:"info"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-title"},[a("p",[t._v("Работа водителя и автомобиля")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("операция")]),a("td",[a("p",[t._v("время по графику")]),a("table",[a("tr",[a("td",[t._v("число")]),a("td",[t._v("месяц")]),a("td",[t._v("час")]),a("td",[t._v("мин")])])])]),a("td",[t._v(" нулевой"),a("br"),t._v("пробег,"),a("br"),t._v("км")]),a("td",[t._v("показание"),a("br"),t._v("спидометра,"),a("br"),t._v("км")]),a("td",[t._v("время фактическое"),a("br"),t._v("число, месяц, ч., мин")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("1")]),a("td",[a("table",[a("tr",[a("td",[t._v("2")]),a("td",[t._v("3")]),a("td",[t._v("4")]),a("td",[t._v("5")])])])]),a("td",[t._v("6")]),a("td",[t._v("7")]),a("td",[t._v("8")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("p",{staticClass:"title"},[t._v("Движение горючего")]),a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",{staticClass:"other"},[a("p",[t._v("прочее")]),a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",[t._v("марка")]),a("td",[t._v(" код"),a("br"),t._v("марки")])])])]),a("td",{staticClass:"given"},[t._v("выдано,"),a("br"),t._v("л")]),a("td",{staticClass:"remain"},[a("p",[t._v("остаток при")]),a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",[t._v("выезде,"),a("br"),t._v("л")]),a("td",[t._v("возвращении,"),a("br"),t._v("л")])])])]),a("td",{staticClass:"passoff"},[t._v("сдано,"),a("br"),t._v("л")]),a("td",{staticClass:"factor"},[t._v("коэффициент"),a("br"),t._v("изменения"),a("br"),t._v("нормы")])])])]),a("td",[a("p",[t._v(" время работы,"),a("br"),t._v("ч. мин.")]),a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",[a("p",[t._v("спецобору"),a("br"),t._v("дования")])]),a("td",[a("p",[t._v("двигателя")])])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("table",{staticClass:"table is-fullwidth right-table"},[a("tr",[a("td"),a("td")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",{staticClass:"other"},[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td"),a("td")])])]),a("td",{staticClass:"given"}),a("td",{staticClass:"remain"},[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td"),a("td")])])]),a("td",{staticClass:"passoff"}),a("td",{staticClass:"factor"})])])]),a("td",[a("table",{staticClass:"table is-fullwidth right-table"},[a("tr",[a("td"),a("td")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",{staticClass:"other"},[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td"),a("td")])])]),a("td",{staticClass:"given"}),a("td",{staticClass:"remain"},[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td"),a("td")])])]),a("td",{staticClass:"passoff"}),a("td",{staticClass:"factor"})])])]),a("td",[a("table",{staticClass:"table is-fullwidth right-table"},[a("tr",[a("td"),a("td")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accept flex-input"},[a("p",[t._v(" Автомобиль технически исправен."),a("br"),t._v("Выезд разрешен. Механик")]),a("p",{staticClass:"info"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"well flex-input"},[a("p",[t._v("При возвращении автомобиль ")]),a("p",{staticClass:"info"})])}],he={name:"WaybillPreview",data:function(){return{plates:null,drivers:null,showMonthSelector:!1,monthList:[{num:1,name:"Январь"},{num:2,name:"Февраль"},{num:3,name:"Март"},{num:4,name:"Апрель"},{num:5,name:"Май"},{num:6,name:"Июнь"},{num:7,name:"Июль"},{num:8,name:"Август"},{num:9,name:"Сентябрь"},{num:10,name:"Октябрь"},{num:11,name:"Ноябрь"},{num:12,name:"Декабрь"}],errors:{dateErr:!0},opened:!1}},computed:Object(z["a"])(Object(z["a"])({},Object(n["e"])("waybills",{waybill:function(t){return t.newWaybill}})),{},{dayOf:function(){return new Date(this.waybill.of).getDate()},monthOf:function(){return h.a.string[new Date(this.waybill.of).getMonth()].toLowerCase()},monthOfNum:function(){return new Date(this.waybill.of).getMonth()+1},yearOf:function(){return new Date(this.waybill.of).getFullYear()},startDate:function(){return this.validateData(new Date(this.waybill.startPlan).getDate())},startMonth:function(){return this.validateData(h.a.num[new Date(this.waybill.startPlan).getMonth()])},startHours:function(){return this.validateData(new Date(this.waybill.startPlan).getHours())},startMinutes:function(){return this.validateData(new Date(this.waybill.startPlan).getMinutes())},finishDate:function(){return this.validateData(new Date(this.waybill.finishPlan).getDate())},finishMonth:function(){return this.validateData(h.a.num[new Date(this.waybill.finishPlan).getMonth()])},finishHours:function(){return this.validateData(new Date(this.waybill.finishPlan).getHours())},finishMinutes:function(){return this.validateData(new Date(this.waybill.finishPlan).getMinutes())}}),methods:Object(z["a"])(Object(z["a"])({},Object(n["d"])("waybills",{setId:"setNewWbId",setPlate:"setNewWbRegistrationPlate",setOf:"setNewWbDateOf",setCar:"setNewWbCar",setDriverName:"setNewWbDriverName",setDriver:"setNewWbDriver",setTask:"setNewWbTask",setFuelStart:"setNewWbFuelStart"})),{},{validateData:function(t){return 1=="".concat(t).length?"0".concat(t):t},setRegistrationPlate:function(t){this.registrationPlate=t.registrationPlate,this.waybill.serial=t.serial,this.waybill.car=t},setDay:function(t){t.target.value>31?(m["a"].open({type:"is-error",message:"Слишком большое число!",queue:!1}),this.errors.dateErr=!0):(this.setOf(new Date("".concat(this.yearOf,"-").concat(this.monthOfNum,"-").concat(t.target.value)).getTime()),this.errors.dateErr=!1)},setMonth:function(t){this.setOf(new Date("".concat(this.yearOf,"-").concat(t,"-").concat(this.dayOf)).getTime()),this.showMonthSelector=!1},setYear:function(t){t.target.value<1970||this.setOf(new Date("".concat(t.target.value,"-").concat(this.monthOfNum,"-").concat(this.dayOf)).getTime())},toggleMonthSelector:function(){this.showMonthSelector=!this.showMonthSelector},getSerial:function(t){var e=this,a=t.target.value;0!==a.length?p.getPlates(a).then((function(t){0==t.data.length?e.plates=null:e.plates=t.data})):this.plates=null},getDriver:function(t){var e=this,a=t.target.value;0!==a.length&&p.getDrivers(a).then((function(t){0==t.data.length?e.drivers=null:e.drivers=t.data}))},open:function(){var t=this;this.opened?m["a"].open({message:"Путевой лист уже открыт!",duration:1500,position:"is-top-right",type:"is-danger",actionText:null}):(this.waybill.mileageStart="".concat(this.waybill.mileageStart),this.waybill.mileageStart.includes(",")&&(this.waybill.mileageStart=parseInt(this.waybill.mileageStart.replace(",","."))),this.waybill.fuelStart="".concat(this.waybill.fuelStart),this.waybill.fuelStart.includes(",")&&(this.waybill.fuelStart=parseInt(this.waybill.fuelStart.replace(",","."))),p.createWaybill(this.waybill).then((function(e){e.data.message?(m["a"].open({message:"".concat(e.data.message," №").concat(t.waybill.id),duration:2e3,position:"is-top-right",actionText:null}),localStorage.setItem("newWaybill",null),localStorage.lastWb=null,t.opened=!0):e.data.error&&m["a"].open({message:e.data.error,duration:1500,position:"is-top-right",actionText:null})})).catch((function(t){console.error(t)})))},setNull:function(t){document.querySelector(t).value=""},print:function(){p.download(this.waybill.id).then((function(t){var e=t.request.responseURL;window.open(e,"_blank")})).catch((function(t){return console.log(t)}))},mounted:function(){this.waybill||this.$router.push("/waybills/open")},close:function(t){t.target.matches(".month-selector *, .month *")||this.showMonthSelector&&(this.showMonthSelector=!1),t.target.matches(".month-selector *, .month *")||this.showMonthSelector&&(this.showMonthSelector=!1)}})},de=he,fe=(a("cee9"),Object(N["a"])(de,ce,ue,!1,null,"4c623bb8",null)),ge=fe.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},ve=[],pe={name:"Reports"},be=pe,ye=Object(N["a"])(be,me,ve,!1,null,null,null),we=ye.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:t.close}},[a("div",{staticClass:"section"},[t.waybills?a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-flex is-centered"},[a("div",{staticClass:"column is-4 opened"},[a("div",{staticClass:"column-container"},[a("p",{staticClass:"num"},[t._v(t._s(t.status.OPEN?t.status.OPEN:0))]),t._m(0)])]),a("div",{staticClass:"column is-4 check"},[a("div",{staticClass:"column-container"},[a("p",{staticClass:"num"},[t._v(t._s(t.status.CHECK?t.status.CHECK:0))]),t._m(1)])]),a("div",{staticClass:"column is-4 closed"},[a("div",{staticClass:"column-container"},[a("p",{staticClass:"num"},[t._v(t._s(t.status.CLOSE?t.status.CLOSE:0))]),t._m(2)])])])]):t._e(),a("div",{staticClass:"container"},[a("div",{staticClass:"level"},[t._m(3),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("table",[a("tr",[a("td",{class:"year"==t.filterType?"active":null,on:{click:function(e){t.setFilter("year"),t.getWaybills(0)}}},[t._v("весь год")]),a("td",{class:"yest"==t.filterType?"active":null,on:{click:function(e){t.setFilter("yest"),t.getWaybills(0)}}},[t._v("вчера")])]),a("tr",[a("td",{class:"month"==t.filterType?"active":null,on:{click:function(e){t.setFilter("month"),t.getWaybills(0)}}},[t._v("месяц")]),a("td",{class:"today"==t.filterType?"active":null,on:{click:function(e){t.setFilter("today"),t.getWaybills(0)}}},[t._v("сегодня")])]),a("tr",[a("td",{class:"week"==t.filterType?"active":null,on:{click:function(e){t.setFilter("week"),t.getWaybills(0)}}},[t._v("неделя")]),a("td",{class:"range"==t.filterType?"active":null,on:{click:function(e){t.setFilter("range"),t.getWaybills(0)}}},[t._v("период")])])])]),a("div",{staticClass:"level-item"},[a("div",{staticClass:"wrapper from",on:{click:t.openCalendar}},[a("p",[t._v(t._s(t.stringFrom))]),t.invalidDate(t.dateFrom)||t.invalidDate(t.dateTo)?t._e():a("Calendar",{class:t.showCalendar?null:"is-hidden",attrs:{firstDate:t.dateFrom,lastDate:t.dateTo},on:{dateTo:t.setTo,dateFrom:t.setFrom}})],1),a("div",{staticClass:"wrapper to",on:{click:t.openCalendar}},[a("p",[t._v(t._s(t.stringTo))])])])])]),a("hr"),a("Table",{attrs:{waybills:t.waybills?t.waybills.listWaybill:null}})],1)])])},_e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" СМЕН"),a("br"),t._v("ОТКРЫТО")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("СМЕН НА"),a("br"),t._v("ПРОВЕРКЕ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("СМЕН"),a("br"),t._v("ЗАКРЫТО")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v(" Отчет по"),a("br"),t._v("путевым листам")])])])}],xe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"reports_table"},on:{click:t.close}},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{staticClass:"id"},[t._v("№")]),s("th",{staticClass:"car"},[s("div",{staticClass:"dropdown",class:t.openedCarDropdown?"is-active":null,on:{click:t.toggleCarDropdown}},[s("p",[t._v("Машина")]),s("img",{staticClass:"icon",attrs:{src:a("6568")}}),t.openedCarDropdown&&t.carFilter?s("div",{staticClass:"menu"},[s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent"},[s("div",{staticClass:"tile is-child"},[s("div",{staticClass:"title"},[t._v("Тип ТС")]),t._l(t.carFilter,(function(e,a){return s("div",{staticClass:"field"},[s("div",{staticClass:"choose",class:a==t.choosenCar?"selected":null,on:{mouseover:function(e){return t.setCar(a)}}},[t._v(t._s(a))])])})),s("div",{staticClass:"field"},[s("div",{staticClass:"choose",class:null==t.choosenCar?"selected":null,on:{click:function(e){return t.setCar(null)}}},[t._v("Все")])])],2),s("div",{staticClass:"tile is-child is-8"},[s("div",{staticClass:"title"},[t._v("Гос. номер")]),s("div",{staticClass:"columns is-flex is-multiline"},t._l(t.carFilter[t.choosenCar],(function(e){return t.choosenCar?s("div",{staticClass:"column is-4"},[s("div",{staticClass:"column-container num",class:t.filter.serial==e.serial?"selected":null,on:{click:function(a){return t.setSerial(e.serial)}}},[t._v(t._s(e.registrationPlate))])]):t._e()})),0)])])])]):t._e()])]),t._m(0),t._m(1),s("th",{staticClass:"status"},[s("div",{staticClass:"dropdown",class:t.openedDropdown?"is-active":null,on:{click:t.openDropdown}},[s("p",[t._v("Статус")]),s("img",{staticClass:"icon",attrs:{src:a("6568")}}),t.openedDropdown?s("div",{staticClass:"menu"},t._l(t.statusList,(function(e){return s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.status,expression:"filter.status"}],attrs:{type:"checkbox",id:e.id},domProps:{value:e.name,checked:Array.isArray(t.filter.status)?t._i(t.filter.status,e.name)>-1:t.filter.status},on:{input:t.setStatus,change:function(a){var s=t.filter.status,i=a.target,n=!!i.checked;if(Array.isArray(s)){var l=e.name,r=t._i(s,l);i.checked?r<0&&t.$set(t.filter,"status",s.concat([l])):r>-1&&t.$set(t.filter,"status",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.filter,"status",n)}}}),s("label",{staticClass:"checkbox",attrs:{for:e.id}},[t._v(t._s(e.text)),s("img",{attrs:{src:"/icons/check.svg"}})])])])})),0):t._e()])])])]),t.waybills&&0!==t.waybills.length?s("tbody",t._l(t.waybills,(function(e){return s("tr",{class:e.status.class,on:{click:function(a){"CLOSE"==e.status.name&&t.to(e.id)}}},[s("td",{staticClass:"id",class:e.status.class},[t._v(t._s(e.id))]),s("td",{staticClass:"car is-paddingless"},[s("table",[s("tr",[s("td",[t._v(t._s(e.car.model))]),s("td",[t._v(t._s(e.car.registrationPlate))])])])]),s("td",{staticClass:"fuel is-paddingless"},[s("table",[s("tr",[s("td",[t._v(t._s(t.waybillFuelDown(e)?t.waybillFuelDown(e):" "))]),s("td",[t._v(t._s(e.trackFuelDown?e.trackFuelDown:" "))])])])]),s("td",{staticClass:"mileage is-paddingless"},[s("table",[s("tr",[s("td",[t._v(t._s(e.mileageTotal))]),s("td",[t._v(t._s(e.trackMileage))])])])]),s("td",{staticClass:"status",class:e.status.class},[t._v(t._s(e.status.text))])])})),0):s("tbody",{staticClass:"no-data"},[s("tr",[s("td",{staticClass:"id"},[s("b-skeleton",{attrs:{animated:!1}})],1),s("td",{staticClass:"car"},[s("b-skeleton",{attrs:{animated:!1}})],1),s("td",{staticClass:"fuel"},[s("b-skeleton",{attrs:{animated:!1}})],1),s("td",{staticClass:"mileage"},[s("b-skeleton",{attrs:{animated:!1}})],1),s("td",{staticClass:"status"},[s("b-skeleton",{attrs:{animated:!1}})],1)])])]),t.waybills||null!=t.waybills?t._e():s("div",{staticClass:"content"},[s("h4",{staticClass:"has-text-centered"},[t._v("Нет подходящих данных")])])])},De=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"fuel is-paddingless"},[t._v("Расход ГСМ, л"),a("table",[a("tr",[a("td",[t._v("по путевому листу")]),a("td",[t._v("по автографу")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"mileage is-paddingless"},[t._v("Пройдено, км"),a("table",[a("tr",[a("td",[t._v("по путевому листу")]),a("td",[t._v("по автографу")])])])])}],Fe={name:"waybillsReportsTable",data:function(){return{mode:"production",openedDropdown:!1,openedCarDropdown:!1,choosenCar:null,filter:{status:["CLOSE"],serial:null},statusFilter:"CLOSE",statusList:[{name:"CLOSE",text:"Закрыт",id:"close"},{name:"OPEN",text:"Открыт",id:"open"},{name:"CHECK",text:"Проверка",id:"check"}]}},props:["waybills"],computed:Object(z["a"])({},Object(n["c"])("waybills",{carFilter:"getCarsFilter"})),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["d"])("waybills",["setCarFilter"])),Object(n["b"])("waybills",{getWaybills:"getWaybills",apiCarsFilter:"apiCarsFilter"})),{},{to:function(t){this.$router.push("/reports/waybill/".concat(t))},waybillFuelDown:function(t){return parseInt(t.fuelStart)+parseInt(t.fuelVolume)-parseInt(t.fuelFinish)},setCar:function(t){var e=this;this.filter.serial=t,this.choosenCar=t,null==t&&setTimeout((function(){e.getWaybills(e.filter).then((function(){e.openedCarDropdown=!1}))}))},setStatus:function(){var t=this;setTimeout((function(){t.getWaybills(t.filter)}))},setSerial:function(t){var e=this;this.filter.serial=t,setTimeout((function(){e.getWaybills(e.filter)})),this.openedCarDropdown=!1},openDropdown:function(t){t.target.matches(".menu *")||(this.openedDropdown=!this.openedDropdown)},close:function(t){t.target.matches(".dropdown *")||(this.openedDropdown=!1,this.openedCarDropdown=!1)},toggleCarDropdown:function(t){t.target.matches(".menu *")||(this.openedCarDropdown=!this.openedCarDropdown)}}),beforeMount:function(){this.apiCarsFilter(),this.getWaybills(this.filter)}},Se=Fe,Me=Object(N["a"])(Se,xe,De,!1,null,null,null),ke=Me.exports,Te={name:"WaybillsReports",components:{Table:ke,Calendar:wt},data:function(){return{isLoading:!1,showCalendar:!1}},computed:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["c"])("waybills",{waybills:"waybills",total:"total",filterType:"getFilterType"})),Object(n["e"])("waybills",{dateTo:function(t){return t.dateTo},dateFrom:function(t){return t.dateFrom}})),{},{stringFrom:function(){return"С ".concat(this.dateFrom.getDate()," ").concat(h.a.string[this.dateFrom.getMonth()]," ").concat(this.dateFrom.getFullYear())},stringTo:function(){return"по ".concat(this.dateTo.getDate()," ").concat(h.a.string[this.dateTo.getMonth()]," ").concat(this.dateTo.getFullYear())},status:function(){var t,e=this.waybills.totalStatus,a={},s=Object(M["a"])(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;a[i[1]]=i[0]}}catch(n){s.e(n)}finally{s.f()}return a}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["b"])("waybills",["waybillsSort","getWaybills","setDates"])),Object(n["d"])("waybills",{setDateTo:"dateTo",setDateFrom:"dateFrom",setFilter:"setFilterType"})),{},{setTo:function(t){var e=this;this.setDateTo(t.date),setTimeout((function(){e.getWaybills()}),50)},setFrom:function(t){var e=this;this.setDateFrom(t.date),setTimeout((function(){e.getWaybills()}),50)},openCalendar:function(t){(t.target.matches(".wrapper.to *")||t.target.matches(".wrapper.from p")||t.target.matches(".wrapper.from"))&&(console.log("xex"),this.showCalendar=!this.showCalendar)},close:function(t){t.target.matches(".calendar *, .wrapper.to *, .wrapper.from *")||this.showCalendar&&(this.showCalendar=!1)},invalidDate:function(t){return"Invalid Date"==t}}),beforeMount:function(){this.setDates()}},We=Te,je=(a("fb85"),Object(N["a"])(We,Ce,_e,!1,null,"686cf8fd",null)),Oe=je.exports,Pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"main"}},[s("div",{staticClass:"container",attrs:{id:"report"}},[s("div",{staticClass:"section"},[s("div",{staticClass:"level"},[t._m(0),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("div",{staticClass:"level"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[t._v("№"),s("form",{on:{submit:function(e){e.preventDefault(),t.getWaybill(t.wbId).then((function(){return t.hint=!1}))}}},[s("b-tooltip",{attrs:{active:t.hint,label:"Нажмите Enter",position:"is-bottom",type:"is-white",size:"is-small",multilined:"",always:""}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.wbId,expression:"wbId"}],staticClass:"id",attrs:{placeholder:"ID",type:"number"},domProps:{value:t.wbId},on:{input:[function(e){e.target.composing||(t.wbId=e.target.value)},t.showHint]}})],1)])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t._v("от"),s("span",[t._v(t._s(t.dateStringOf?t.dateStringOf:"XX.XX.XXXX"))])])])])])])]),s("hr"),t.waybill?s("div",{staticClass:"wrapper"},[s("div",{staticClass:"item"},[s("p",[t._v("Гос. номер:")]),s("div",{staticClass:"plate",class:t.plates?"is-active":null},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.waybill.car.registrationPlate,expression:"waybill.car.registrationPlate"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.waybill.car.registrationPlate},on:{input:[function(e){e.target.composing||t.$set(t.waybill.car,"registrationPlate",e.target.value)},t.filterPlates]}}),s("img",{staticClass:"icon",attrs:{src:a("01f7")}})]),t.plates?s("div",{staticClass:"plates dropdown"},t._l(t.plates,(function(e){return s("p",{on:{click:function(a){return t.getWb(e.serial)}}},[t._v(t._s(e.registrationPlate))])})),0):t._e()]),s("div",{staticClass:"item"},[s("p",[t._v("Водитель: "+t._s(t.waybill.driver.name))])])]):t._e(),t.waybill?s("hr"):t._e(),t.waybillReport?s("Chart",{attrs:{items:t.chartData,line:t.waybillReport.lineConfig,steps:t.waybillReport.steps}}):t._e(),t.waybill?s("div",{staticClass:"tile is-ancestor"},[s("div",{staticClass:"tile is-parent is-paddingless"},[s("div",{staticClass:"tile is-child is-6"},[s("p",{staticClass:"title"},[t._v("Сравнение данных")]),s("table",{staticClass:"table is-fullwidth"},[t._m(1),s("tbody",[s("tr",[s("td",{staticClass:"name"},[t._v("Расход топлива")]),s("td",[t._v(t._s(t.waybill.trackFuelDown.toFixed(2)))]),s("td",[t._v(t._s(t.totalWaybillFuel))])]),s("tr",[s("td",{staticClass:"name"},[t._v("Пробег")]),s("td",[t._v(t._s(t.waybill.trackMileage.toFixed(2)))]),s("td",[t._v(t._s(t.waybill.mileageTotal))])]),s("tr",[s("td",{staticClass:"name"},[t._v("Время")]),s("td",[t._v(t._s(t.trackTimeDiff))]),s("td",[t._v(t._s(t.waybillTimeDiff))])])])])]),s("div",{staticClass:"tile is-child"},[s("p",{staticClass:"title"},[t._v("Сравнение адресов")]),t.trackLocations&&0!=t.trackLocations.length&&t.wbLocations&&0!=t.wbLocations.length?t._e():s("div",{staticClass:"content"},[s("p",{staticClass:"is-size-4 has-text-warning"},[t._v("Нет данных по адресам")])]),s("div",{staticClass:"tile"},[s("div",{staticClass:"tile is-parent"},[t.trackLocations&&0!==t.trackLocations.length?s("div",{staticClass:"tile is-child"},[s("p",{staticClass:"title"},[t._v("АВТОГРАФ")]),s("div",{staticClass:"with-border"},t._l(t.trackLocations,(function(e){return t.trackLocations?s("p",[t._v(t._s(e)+", ")]):t._e()})),0)]):t._e(),t.wbLocations&&0!==t.wbLocations?s("div",{staticClass:"tile is-child"},[s("p",{staticClass:"title"},[t._v("Путевой лист")]),s("div",{staticClass:"with-border"})]):t._e()])])])])]):t._e()],1)])])},Le=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v("Отчет по"),a("br"),t._v("путевому листу")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),a("th",[t._v("АВТОГРАФ")]),a("th",[t._v("Путевой лист")])])])}],Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chart?a("div",{staticClass:"container",on:{mouseout:t.hideItem}},[a("v-stage",{attrs:{config:{width:976,height:425}}},[a("v-layer",[t._l(t.steps,(function(e){return a("v-group",[a("v-rect",{attrs:{config:{x:0,y:e.y,height:1,width:907,fill:"#EEEEEE"}}}),a("v-rect",{attrs:{config:t.configBg.y?t.configBg:null}}),a("v-text",{attrs:{config:{x:5,y:e.y-14,text:e.num,fontFamily:"Montserrat",fontSize:12,fill:"#617E8C"}}})],1)})),t._l(t.chart,(function(e,s){return t.chart?a("v-group",{attrs:{config:{height:425,width:907/t.chart.length}}},[a("v-rect",{attrs:{config:t.configLine&&t.configLine.id==e.id?t.configLine:null}})],1):t._e()})),a("v-line",{attrs:{config:t.line}}),a("v-group",[a("v-rect",{attrs:{config:t.configPopUp.show?t.configPopUp:null}}),a("v-text",{attrs:{config:t.configPopUpTitle.show?t.configPopUpTitle:null}}),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+16,y:t.configPopUp.y+110,text:"Расход:",fontFamily:"Montserrat",fill:"#617E8C",fontSize:10}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+t.configPopUp.width-100,y:t.configPopUp.y+99,text:t.configPopUp.fuelDown,fontFamily:"Montserrat",textAlign:"right",fill:"#617E8C",fontSize:24,width:70,align:"right"}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+t.configPopUp.width-25,y:t.configPopUp.y+110,text:"л/м",fontFamily:"Montserrat",textAlign:"right",fill:"#617E8C",fontSize:10}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+16,y:t.configPopUp.y+135,text:"Пробег:",fontFamily:"Montserrat",fill:"#617E8C",fontSize:10}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+t.configPopUp.width-100,y:t.configPopUp.y+125,text:t.configPopUp.totalDistance,fontFamily:"Montserrat",textAlign:"right",fill:"#617E8C",fontSize:24,width:70,align:"right"}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+t.configPopUp.width-22,y:t.configPopUp.y+135,text:"км",fontFamily:"Montserrat",textAlign:"right",fill:"#617E8C",fontSize:10}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+16,y:t.configPopUp.y+160,text:"Длительность:",fontFamily:"Montserrat",fill:"#617E8C",fontSize:10}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+t.configPopUp.width-60,y:t.configPopUp.y+149,text:t.configPopUp.totalTime,fontFamily:"Montserrat",textAlign:"right",fill:"#617E8C",fontSize:24}}}):t._e(),t.configPopUp.show?a("v-text",{attrs:{config:{x:t.configPopUp.x+t.configPopUp.width-28,y:t.configPopUp.y+160,text:"мин",fontFamily:"Montserrat",textAlign:"right",fill:"#617E8C",fontSize:10}}}):t._e(),t.configPopUp.show?a("v-rect",{attrs:{config:{x:t.configPopUp.x,y:t.configPopUp.y+90,height:1,width:t.configPopUp.width,stroke:"#C4C4C4",strokeWidth:1,dash:[4,4]}}}):t._e()],1),t._l(t.chart,(function(e,s){return a("v-circle",{attrs:{config:t.configItem&&t.configItem.id==e.config.id?t.configItem:e.config}})})),t._l(t.chart,(function(e,s){return a("v-group",[e.maxFuelDown&&0!==e.firstFuel&&0!==e.lastFuel?a("v-text",{attrs:{config:{x:e.config.x+12,y:e.config.y-24,text:e.fuelDown,fontFamily:"Montserrat",fontSize:24,fill:"#F09A9B"}}}):t._e(),e.minFuelDown&&0!==e.firstFuel&&0!==e.lastFuel?a("v-text",{attrs:{config:{x:e.config.x+12,y:e.config.y,text:e.fuelDown,fontFamily:"Montserrat",fontSize:24,fill:"#7FCCC6"}}}):t._e(),e.maxFuelDown&&0!==e.firstFuel&&0!==e.lastFuel?a("v-circle",{attrs:{config:{x:e.config.x,y:e.config.y,radius:t.items.length>10?907/t.items.length/2:907/t.items.length/80,fill:"#F09A9B"}}}):t._e(),e.minFuelDown&&0!==e.firstFuel&&0!==e.lastFuel?a("v-circle",{attrs:{config:{x:e.config.x,y:e.config.y,radius:t.items.length>10?907/t.items.length/2:907/t.items.length/80,fill:"#7FCCC6"}}}):t._e()],1)})),a("v-group",[a("v-text",{attrs:{config:{x:25,y:8,text:"Расход топлива\nпо участкам, л/м",fontFamily:"Montserrat",fontSize:12,fontStyle:700,fill:"#617E8C"}}})],1),t._l(t.steps,(function(e){return a("v-group",t._l(t.chart,(function(s,i){return a("v-rect",{attrs:{config:{x:s.config.x-907/t.items.length/2,y:e.y,height:400/t.steps.length,width:907/t.items.length}},on:{mousemove:function(a){return t.showItem(i,e.y,s)}}})})),1)}))],2)],1)],1):t._e()},Ee=[],ze={name:"wbChart",data:function(){return{configItem:{show:!0,id:null,x:null,y:null,radius:this.items.length>10?907/this.items.length/2:907/this.items.length/80,fill:"#F8981D"},configLine:{id:null,x:null,y:1,width:0,height:425,fill:"rgba(238, 238, 238, 0.3)",opacity:.1},configBg:{x:0,y:null,height:null,width:907,fill:"rgba(238, 238, 238, 0.3)",opacity:.1},configPopUp:{show:!1,x:null,y:null,height:null,width:null,fill:"#FFFFFF",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:3,shadowColor:"rgba(176, 191, 198, 0.5)",shadowOpacity:.5,stroke:"#C4C4C4",strokeWidth:1,dash:[4,4]},configPopUpTitle:{show:!1,x:null,y:null,text:null,fontFamily:"Montserrat",lineHeight:1,fontSize:14,wrap:"char",fill:"#617E8C"}}},computed:{chart:function(){return this.items}},props:["items","line","steps"],methods:{showItem:function(t,e,a){var s=this.chart[t].config;this.popup=t,this.configItem.id=s.id,this.configItem.x=s.x,this.configItem.y=s.y,this.configBg.y=e,this.configBg.height=400/this.steps.length+4,this.configPopUp.show=!0,this.configPopUp.fuelDown=a.fuelDown,this.configPopUp.totalDistance=a.totalDistance.toFixed(2),this.configPopUp.totalTime=this.$moment.utc(this.$moment(new Date(a.firstDT),"DD/MM/YYYY HH:mm:ss").diff(this.$moment(new Date(a.lastDT),"DD/MM/YYYY HH:mm:ss"))).format("mm"),this.configPopUp.width=180,this.configPopUp.height=200,a.config.x<449?this.configPopUp.x=a.config.x:this.configPopUp.x=a.config.x-this.configPopUp.width,a.config.y<130?this.configPopUp.y=a.config.y:this.configPopUp.y=a.config.y-this.configPopUp.height,this.configPopUpTitle.show=!0,this.configPopUpTitle.width=this.configPopUp.width-32,this.configPopUpTitle.x=this.configPopUp.x+16,this.configPopUpTitle.y=this.configPopUp.y+16,this.configPopUpTitle.text="".concat(a.firstLocation,"\n\n").concat(a.lastLocation),this.configLine.x=s.x-this.configItem.radius,0==this.configLine.width&&(this.configLine.width=907/this.items.length)},showBg:function(t){this.bgNum=t},hideItem:function(){this.configItem.id=null,this.configItem.x=null,this.configItem.y=null,this.configLine.x=null,0!==this.configLine.width&&(this.configLine.width=0),this.configBg.y=null,this.configBg.height=null,this.configPopUp.show=null,this.configPopUp.fuelDown=null,this.configPopUp.totalDistance=null,this.configPopUp.totalTime=null,this.configPopUp.width=null,this.configPopUp.height=null,this.configPopUp.x=null,this.configPopUp.y=null,this.configPopUpTitle.show=null,this.configPopUpTitle.width=null,this.configPopUpTitle.x=null,this.configPopUpTitle.y=null,this.configPopUpTitle.text=null}}},Be=ze,$e=Object(N["a"])(Be,Ye,Ee,!1,null,null,null),Ne=$e.exports,Re={name:"Report",data:function(){return{wbId:this.id?this.id:null,registrationPlate:this.waybill?this.waybill.car.registrationPlate:null,hint:!1,mode:"production",plates:null}},components:{Chart:Ne},props:{id:{default:null}},watch:{waybillReport:function(){this.wbId=this.waybill.id}},computed:Object(z["a"])(Object(z["a"])({},Object(n["c"])("reports",{waybillReport:"getWaybillReport"})),{},{waybill:function(){return this.waybillReport?this.waybillReport.waybill:null},chartData:function(){return this.waybillReport?this.waybillReport.track:null},trackLocations:function(){return this.waybillReport?this.waybillReport.trackLocations:null},wbLocations:function(){return this.waybillReport&&this.waybillReport.wbLocations?this.waybillReport.wbLocations:null},dateStringOf:function(){if(this.waybill){var t=new Date(this.waybill.of),e=1=="".concat(t.getDate()).length?"0".concat(t.getDate()):t.getDate();return"".concat(e,".").concat(h.a.num[t.getMonth()],".").concat(t.getFullYear())}return null},totalWaybillFuel:function(){return parseInt(this.waybill.fuelStart)+parseInt(this.waybill.fuelVolume)-parseInt(this.waybill.fuelFinish)},totalTrackFuel:function(){return parseInt(this.waybill.trackFuelDown)-parseInt(this.waybill.trackFuelUp)<0?0:parseInt(this.waybill.trackFuelDown)-parseInt(this.waybill.trackFuelUp)},waybillTimeDiff:function(){return this.$moment.utc(this.$moment(new Date(this.waybill.startPlan),"DD/MM/YYYY HH:mm:ss").diff(this.$moment(new Date(this.waybill.finishPlan),"DD/MM/YYYY HH:mm:ss"))).format("HH:mm")},trackTimeDiff:function(){return this.$moment.utc(this.$moment(new Date(this.waybill.startFact),"DD/MM/YYYY HH:mm:ss").diff(this.$moment(new Date(this.waybill.finishFact),"DD/MM/YYYY HH:mm:ss"))).format("HH:mm")}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["b"])("reports",{getWaybill:"apiWaybillReport"})),Object(n["d"])("reports",{setWaybill:"setWaybillReport"})),{},{getWb:function(t){var e=this;p.getLastWb({serial:t}).then((function(t){t.data?(e.getWaybill(t.data.id),e.plates=null):m["a"].open({message:"По данному регистрационному номеру нет закрытых путевых листов",position:"is-top-right",duration:2e3,actionText:null})}))},showHint:function(){var t=this;this.hint=!1,setTimeout((function(){t.hint=!0}),5e3)},filterPlates:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,p.getPlates(t.target.value).then((function(t){return e.plates=t.data}));case 2:case"end":return a.stop()}}),a)})))()}}),mounted:function(){this.id&&this.getWaybill(this.id)}},Ie=Re,Ue=Object(N["a"])(Ie,Pe,Le,!1,null,null,null),He=Ue.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{on:{click:t.close}},[a("div",{staticClass:"section"},[a("div",{staticClass:"container"},[a("div",{staticClass:"level"},[t._m(0),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("table",[a("tr",[a("td",{class:"year"==t.filter?"active":null,on:{click:function(e){t.setFilter("year"),t.getAutographReport()}}},[t._v("весь год")]),a("td",{class:"yest"==t.filter?"active":null,on:{click:function(e){t.setFilter("yest"),t.getAutographReport()}}},[t._v("вчера")])]),a("tr",[a("td",{class:"month"==t.filter?"active":null,on:{click:function(e){t.setFilter("month"),t.getAutographReport()}}},[t._v("месяц")]),a("td",{class:"today"==t.filter?"active":null,on:{click:function(e){t.setFilter("today"),t.getAutographReport()}}},[t._v("сегодня")])]),a("tr",[a("td",{class:"week"==t.filter?"active":null,on:{click:function(e){t.setFilter("week"),t.getAutographReport()}}},[t._v("неделя")]),a("td",{class:"range"==t.filter?"active":null,on:{click:function(e){t.setFilter("range"),t.getAutographReport()}}},[t._v("период")])])]),a("div",{staticClass:"level-item trigger",on:{click:t.openCalendar}},[a("div",{staticClass:"wrapper from"},[a("p",[t._v(t._s(t.stringFrom))]),t.invalidDate(t.dateFrom)||t.invalidDate(t.dateTo)?t._e():a("Calendar",{class:t.showCalendar?null:"is-hidden",attrs:{firstDate:new Date(t.dateFrom),lastDate:new Date(t.dateTo)},on:{dateTo:t.setTo,dateFrom:t.setFrom}})],1),a("div",{staticClass:"wrapper to"},[a("p",[t._v(t._s(t.stringTo))])])])])])]),a("hr"),a("Table",{attrs:{waybills:t.autographReport}})],1)])])},Xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("h1",[t._v(" Отчет по"),a("br"),t._v("автографу")])])])}],Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.waybills?a("div",{attrs:{id:"autograph_table"}},[a("table",{staticClass:"table top"},[t._m(0),0!==t.waybills.length?a("tbody",t._l(t.waybills,(function(e){return a("tr",[a("td",{staticClass:"car is-paddingless"},[a("table",[a("tr",[a("td",[t._v(t._s(e.model))]),a("td",[t._v(t._s(e.registrationPlate))])])])]),a("td",{staticClass:"fuel is-paddingless"},[a("table",[a("tr",[a("td",[t._v(t._s(e.firstFuel))]),a("td",[t._v(t._s(e.motionFuelUp))]),a("td",[t._v(t._s(e.motionFuelDown))]),a("td",[t._v(t._s(e.lastFuel))])])])]),a("td",{staticClass:"distance is-paddingless"},[a("table",[a("tr",[a("td",[t._v(t._s(e.totalDistance))]),a("td",[t._v(t._s(e.workDistance))]),a("td",[t._v(t._s(e.idingDistance))])])])])])})),0):a("tbody",{staticClass:"no-data"},[a("tr",[a("td",{staticClass:"car"},[a("b-skeleton",{attrs:{animated:!1}})],1),a("td",{staticClass:"fuel"},[a("b-skeleton",{attrs:{animated:!1}})],1),a("td",{staticClass:"distance"},[a("b-skeleton",{attrs:{animated:!1}})],1)])])]),0==t.waybills.length?a("div",{staticClass:"content"},[a("h4",{staticClass:"has-text-centered"},[t._v("Нет подходящих данных")])]):t._e(),0!==t.waybills.length?a("table",{staticClass:"table bottom"},[a("tr",[t._m(1),a("td",{staticClass:"fuel"},[a("table",[a("tr",[a("td"),a("td",[t._v(t._s(t.total.motionFuelUp)+" ")]),a("td",[t._v(t._s(t.total.motionFuelDown))]),a("td")])])]),t._m(2)])]):t._e()]):t._e()},qe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"car"},[t._v("Машина")]),a("th",{staticClass:"fuel"},[t._v("Расход ГСМ, л"),a("table",[a("tr",[a("td",[t._v("ост.нач")]),a("td",[t._v("приход")]),a("td",[t._v("расход")]),a("td",[t._v("ост.кон")])])])]),a("th",{staticClass:"distance"},[t._v("Пройдено, км"),a("table",[a("tr",[a("td",[t._v("общий")]),a("td",[t._v("рабочий")]),a("td",[t._v("холостой")])])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"car"},[a("table",[a("tr",[a("td"),a("td",[t._v("Итого:")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"distance"},[a("table",[a("tr",[a("td"),a("td"),a("td")])])])}],Ke={name:"waybillsReportsTable",data:function(){return{filter:"ALL"}},props:["waybills","carsList"],computed:Object(z["a"])({},Object(n["c"])("reports",{total:"getTotalData"})),methods:Object(z["a"])({},Object(n["b"])("reports",{autographReport:"apiAutographReport"})),beforeMount:function(){this.autographReport()}},Ve=Ke,Ze=Object(N["a"])(Ve,Je,qe,!1,null,null,null),Ge=Ze.exports,Qe={name:"AutographReport",components:{Table:Ge,Calendar:wt},data:function(){return{date:new Date,showCalendar:!1}},computed:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["c"])("reports",{autographReport:"getAutographReport"})),Object(n["e"])("reports",{dateTo:function(t){return t.dateTo},dateFrom:function(t){return t.dateFrom},carsList:function(t){return t.carsList},filter:function(t){return t.filter}})),{},{stringFrom:function(){var t=new Date(this.dateFrom);return"С ".concat(t.getDate()," ").concat(h.a.string[t.getMonth()]," ").concat(t.getFullYear())},stringTo:function(){var t=new Date(this.dateTo);return"по ".concat(t.getDate()," ").concat(h.a.string[t.getMonth()]," ").concat(t.getFullYear())}}),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["b"])("reports",{getAutographReport:"apiAutographReport",setDates:"setDates"})),Object(n["d"])("reports",{setDateTo:"setDateTo",setDateFrom:"setDateFrom",setFilter:"setFilter"})),{},{setTo:function(t){var e=this;this.setDateTo(t),setTimeout((function(){e.getAutographReport()}),50)},setFrom:function(t){var e=this;this.setDateFrom(t),setTimeout((function(){e.getAutographReport()}),50)},openCalendar:function(t){t.target.matches(".calendar *")||(this.showCalendar=!this.showCalendar)},close:function(t){t.target.matches(".calendar *, .wrapper.to *, .wrapper.from *")||this.showCalendar&&(this.showCalendar=!1)},invalidDate:function(t){return"Invalid Date"==t}}),beforeMount:function(){"null"!=this.dateTo&&"null"!=this.dateFrom&&this.dateTo&&this.dateFrom&&"Invalid Date"!=this.dateFrom&&"Invalid Date"!=this.dateTo||this.setDates()}},ta=Qe,ea=(a("bee2"),Object(N["a"])(ta,Ae,Xe,!1,null,"b9dad854",null)),aa=ea.exports;i["default"].use(l["a"]);var sa=function(t){var e=o.a.AES.decrypt(t,"kFLeCZ19095");return e=e.toString(o.a.enc.Utf8),JSON.parse(e)},ia=function(t,e){return!(!e||!e.can[t])},na=function(t){return!(!t||null==t||"null"==t)||(p.logout(),!1)},la=new l["a"]({base:"/",mode:"history",routes:[{path:"/",name:"Login",component:I,hidden:!0,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"Login"==t.name&&na(s)?(a({name:"OpenWaybill"}),m["a"].open({message:"Вы уже авторизованы",actionText:null})):a()}},{path:"/login",redirect:"/"},{path:"/register",name:"Register",component:q,hidden:!0,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"Register"==t.name&&na(s)?(a({name:"OpenWaybill"}),m["a"].open({message:"Вы уже авторизованы",actionText:null})):a()}},{path:"/waybills",name:"Waybills",component:tt,hidden:!1,props:!0,children:[{path:"",name:"WaybillsList",menuName:"Путевые листы",menuIcon:"waybills",permission:"watchWaybillsList",component:Ot,hidden:!1,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"WaybillsList"!=t.name||na(s)?"WaybillsList"!=t.name||ia("watchWaybillsList",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}},{path:"cars",name:"WaybillsListBycars",menuName:"Путевые листы по авто.",menuIcon:"waybills",permission:"watchWaybillsList",component:Bt,hidden:!1,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"WaybillsList"!=t.name||na(s)?"WaybillsList"!=t.name||ia("watchWaybillsList",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}},{path:"open",name:"OpenWaybill",menuName:"Открыть путевой лист",menuIcon:"addWaybill",permission:"openWaybill",component:ae,hidden:!1,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"OpenWaybill"!=t.name||na(s)?"OpenWaybill"!=t.name||ia("openWaybill",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}},{path:"close",name:"CloseWaybillWithoutId",menuName:"Закрыть путевой лист",menuIcon:"closeWaybill",permission:"closeWaybill",component:oe,hidden:!1,props:!0,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"CloseWaybillWithoutId"!=t.name||na(s)?"CloseWaybillWithoutId"!=t.name||ia("closeWaybill",s)?a():(a({name:"OpenWaybill"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))},children:[{path:":num",component:oe,hidden:!0,name:"CloseWaybill",beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"CloseWaybill"!=t.name||na(s)?"CloseWaybill"!=t.name||ia("closeWaybill",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}}]},{path:"preview",name:"PreviewWaybill",component:ge,hidden:!0,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"PreviewWaybill"!=t.name||na(s)?"PreviewWaybill"!=t.name||ia("openWaybill",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}}]},{path:"/reports",name:"Reports",menuName:"Отчеты",component:we,hidden:!1,children:[{path:"waybills",name:"WaybillsReport",menuName:"По путевым листам",menuIcon:"report_menu-item",permission:"reportWaybill",component:Oe,hidden:!1,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"WaybillsReport"!=t.name||na(s)?"WaybillsReport"!=t.name||ia("reportWaybill",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}},{path:"waybill",name:"WaybillReport",component:He,hidden:!0,props:!0,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"WaybillReport"!=t.name||na(s)?"WaybillReport"!=t.name||ia("reportWaybill",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))},children:[{path:":id",component:He,hidden:!0,name:"WaybillReportByID",beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"WaybillReportByID"!=t.name||na(s)?"WaybillReportByID"!=t.name||ia("reportWaybill",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}}]},{path:"autograph",name:"Autopraph",menuName:"По автографу",menuIcon:"report_menu-item",permission:"reportAutograph",component:aa,hidden:!1,beforeEnter:function(t,e,a){var s=localStorage.user&&"null"!==localStorage.user?sa(localStorage.user):L.state.user.user&&"null"!==L.state.user.user?L.state.user.user:null;"Autopraph"!=t.name||na(s)?"Autopraph"!=t.name||ia("reportAutograph",s)?a():(a({name:"Login"}),m["a"].open({message:"Недостаточно прав доступа",actionText:null})):(a({name:"Login"}),m["a"].open({message:"Сначала войдите или зарегистрируйтесь",actionText:null}))}}]},{path:"*",redirect:"/waybills/open",hidden:!0}]}),ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.header?a("Header",{attrs:{user:t.storedUser?t.storedUser:t.user,show:t.show,login:t.isLogin},on:{show:t.showNav,hide:t.hideNav}}):t._e(),a("div",{staticClass:"hero"},[t.isLogin?t._e():a("Sidebar",{attrs:{user:t.storedUser?t.storedUser:t.user,routes:t.routes},on:{show:t.showNav,hide:t.hideNav}}),a("router-view",{attrs:{id:"main",user:t.storedUser?t.storedUser:t.user}})],1)],1)},oa=[],ca=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"aside"}},[s("div",{staticClass:"aside-item main-item",on:{mousemove:t.showNav,mouseout:t.hideNav}},[s("img",{attrs:{src:a("5b1c")}}),s("div",{staticClass:"menu"})]),t._l(t.routes,(function(e,a){return e.hidden||"Waybills"!=e.name?t._e():s("div",{key:a,staticClass:"items"},t._l(e.children,(function(a,i){return!a.hidden&&t.user&&t.user.can[a.permission]?s("router-link",{key:i,staticClass:"aside-item has-text-centered",class:a.name==t.curRoute?"router-link-exact-active":"",attrs:{to:a.path?e.path+"/"+a.path:e.path}},[s("img",{attrs:{src:t.user.can[a.permission].img.replace(".png",".svg")}}),t._v(t._s(a.menuName))]):t._e()})),1)})),t._l(t.routes,(function(e,a){return!e.hidden&&"Reports"==e.name&&t.user&&(t.user.can.reportWaybill||t.user.can.reportAutograph)?s("div",{key:a,staticClass:"items"},[e.menuName?s("div",{staticClass:"head"},[t._v(t._s(e.menuName))]):t._e(),t._l(e.children,(function(a,i){return!a.hidden&&t.user&&t.user.can[a.permission]?s("router-link",{key:i,staticClass:"aside-item has-text-centered",attrs:{to:a.path?e.path+"/"+a.path:e.path}},[s("img",{attrs:{src:t.user.can[a.permission].img.replace(".png",".svg")}}),t._v(t._s(a.menuName))]):t._e()}))],2):t._e()}))],2)},ua=[],ha={name:"Sidebar",props:["routes","user"],data:function(){return{mode:"production",curRoute:this.$router.currentRoute.name}},watch:{$route:function(){this.curRoute=this.$router.currentRoute.name}},methods:Object(z["a"])(Object(z["a"])({},Object(n["d"])("user",["setUser"])),{},{showNav:function(){this.$emit("show",{show:!0})},hideNav:function(){this.$emit("hide",{show:!1})},logout:function(){localStorage.user&&"null"!==localStorage.user?localStorage.user=null:this.setUser(null),p.logout(),this.$router.push({name:"Login"})}})},da=ha,fa=Object(N["a"])(da,ca,ua,!1,null,null,null),ga=fa.exports,ma=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{class:t.show||t.login?"active":""},[s("div",{staticClass:"container",on:{mousemove:t.showNav,mouseout:t.hideNav}},[s("img",{staticClass:"logo",attrs:{src:a("5b1c")}}),t.user?s("div",{staticClass:"user-data"},[s("img",{staticClass:"user",attrs:{src:t.user.avatar.replace(".png",".svg")}}),s("div",{staticClass:"data"},[s("p",[t._v(t._s(t.user.role)+":")]),s("p",[t._v(t._s(t.user.name))])]),s("p",{on:{click:t.logout}},[t._v("Выход")])]):t._e()])])},va=[],pa={name:"Header",props:["show","login","user"],methods:Object(z["a"])(Object(z["a"])({},Object(n["d"])("user",["setUser"])),{},{showNav:function(){this.$emit("show",{show:!0})},hideNav:function(){this.$emit("hide",{show:!1})},logout:function(){localStorage.user&&"null"!==localStorage.user?localStorage.user=null:this.setUser(null),p.logout(),this.$router.push({name:"Login"})}})},ba=pa,ya=(a("a1a1"),Object(N["a"])(ba,ma,va,!1,null,"534df30d",null)),wa=ya.exports,Ca={name:"App",components:{Sidebar:ga,Header:wa},data:function(){return{breadcrumbs:this.$router.currentRoute.meta.breadcrumbs,routes:this.$router.options.routes,show:!1,isLogin:!1,user:null,header:!0}},computed:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["e"])("waybills",{dateFrom:function(t){return t.dateFrom},dateTo:function(t){return t.dateTo}})),Object(n["e"])("reports",{repDateFrom:function(t){return t.dateFrom},repDateTo:function(t){return t.dateTo}})),Object(n["e"])("user",{storedUser:function(t){return t.user}})),methods:Object(z["a"])(Object(z["a"])(Object(z["a"])({},Object(n["b"])("waybills",{setDates:"setDates",getNewWb:"getNewWaybillData"})),Object(n["b"])("reports",{setRepDates:"setDates"})),{},{showNav:function(t){this.show=t.show},hideNav:function(t){this.show=t.show}}),watch:{$route:function(){if("Login"==this.$router.currentRoute.name||"Register"==this.$router.currentRoute.name?this.isLogin=!0:this.isLogin=!1,localStorage.user&&"null"!==localStorage.user){var t=o.a.AES.decrypt(localStorage.user,"kFLeCZ19095");t=t.toString(o.a.enc.Utf8),t=JSON.parse(t),this.user=t}else this.user=null;"null"!=localStorage.newWaybill&&localStorage.newWaybill||this.getNewWb()},localStorage:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){if(localStorage.user&&"null"!==localStorage.user){var t=o.a.AES.decrypt(localStorage.user,"kFLeCZ19095");t=t.toString(o.a.enc.Utf8),t=JSON.parse(t),this.user=t}else this.user=null}))},beforeMount:function(){if(this.dateFrom&&this.dateTo||this.setDates(),this.repDateFrom&&this.repDateTo||this.setRepDates(),"Login"==this.$router.currentRoute.name||"Register"==this.$router.currentRoute.name||"Reset"==this.$router.currentRoute.name?this.isLogin=!0:this.isLogin=!1,localStorage.user&&"null"!==localStorage.user){var t=o.a.AES.decrypt(localStorage.user,"kFLeCZ19095");t=t.toString(o.a.enc.Utf8),t=JSON.parse(t),this.user=t}else this.storedUser&&"null"!==this.storedUser?this.user=this.storedUser:this.user=null},beforeDestroy:function(){localStorage.user=null}},_a=Ca,xa=(a("cf25"),Object(N["a"])(_a,ra,oa,!1,null,null,null)),Da=xa.exports,Fa=a("7591"),Sa=a.n(Fa),Ma=a("c1df"),ka=a.n(Ma);i["default"].use(n["a"]),i["default"].use(s["a"],{defaultSnackbarDuration:2e3,defaultSnackbarPosition:"is-top-right"}),i["default"].use(Sa.a),i["default"].prototype.$moment=ka.a,i["default"].config.productionTip=!1,new i["default"]({router:la,store:L,render:function(t){return t(Da)}}).$mount("#app")},"5b1c":function(t,e,a){t.exports=a.p+"img/logo.4d58b156.svg"},"5c45":function(t,e,a){t.exports=a.p+"img/close-waybill.4f5be632.svg"},"5d8a":function(t,e,a){},"5f67":function(t,e,a){t.exports=a.p+"img/spin.8744231b.svg"},6:function(t,e){},6568:function(t,e,a){t.exports=a.p+"img/angle.537de2a8.svg"},7:function(t,e){},"76a4":function(t,e,a){t.exports=a.p+"img/add.1a16f3ff.svg"},7991:function(t,e,a){t.exports=a.p+"img/big_logo.194a5078.svg"},8:function(t,e){},8508:function(t,e,a){t.exports=a.p+"img/waybill-report.38add9c6.svg"},8545:function(t,e,a){},9:function(t,e){},9958:function(t,e,a){},a1a1:function(t,e,a){"use strict";var s=a("d944"),i=a.n(s);i.a},b009:function(t,e,a){t.exports=a.p+"img/password.4531c44d.svg"},b35c:function(t,e,a){},b99a:function(t,e,a){"use strict";var s=a("2aae"),i=a.n(s);i.a},b9ec:function(t,e,a){"use strict";var s=a("51c1"),i=a.n(s);i.a},bae1:function(t,e,a){t.exports=a.p+"img/incrase.af1b7976.svg"},bee2:function(t,e,a){"use strict";var s=a("3a36"),i=a.n(s);i.a},ca2f:function(t,e,a){t.exports=a.p+"img/login.1fb2ed5f.svg"},ceaf:function(t,e,a){},cee9:function(t,e,a){"use strict";var s=a("ceaf"),i=a.n(s);i.a},cf23:function(t,e,a){},cf25:function(t,e,a){"use strict";var s=a("fea6"),i=a.n(s);i.a},d7b6:function(t,e,a){"use strict";var s=a("9958"),i=a.n(s);i.a},d944:function(t,e,a){},efb6:function(t,e,a){"use strict";var s=a("b35c"),i=a.n(s);i.a},f06a:function(t,e,a){},fb85:function(t,e,a){"use strict";var s=a("1601"),i=a.n(s);i.a},fea6:function(t,e,a){}});
//# sourceMappingURL=app.43a3cb4c.js.map